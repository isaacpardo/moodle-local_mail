import{n as N,s as Vs,g as Ks,a as Ws,b as vs,S as ne,i as re,c as le,e as p,t as R,d as I,f as u,h as S,j as g,k as Fe,l as P,m as Ae,o as q,p as oe,q as C,r as J,u as Q,v as F,w as z,x as L,y as G,z as ze,A as Re,B as Le,C as Je,D as Ge,E as Oe,F as ks,G as Xs,H as ce,I as de,J as ve,K as Ke,L as he,M as Ys,N as ws,O as it,P as Js,Q as Ze,R as xe,T as et,U as We,V as $s,W as at,X as ys,Y as Ms,Z as Is,_ as Ss,$ as Pe,a0 as Ee,a1 as Ue,a2 as tt,a3 as Qe,a4 as ot,a5 as Zs,a6 as xs,a7 as qs,a8 as el,a9 as tl}from"./global-ce70547b.js";const Ce=[];function sl(l,e=N){let t;const s=new Set;function r(a){if(Vs(l,a)&&(l=a,t)){const o=!Ce.length;for(const f of s)f[1](),Ce.push(f,l);if(o){for(let f=0;f<Ce.length;f+=2)Ce[f][0](Ce[f+1]);Ce.length=0}}}function n(a){r(a(l))}function i(a,o=N){const f=[a,o];return s.add(f),s.size===1&&(t=e(r)||N),a(l),()=>{s.delete(f),s.size===0&&t&&(t(),t=null)}}return{set:r,update:n,subscribe:i}}let Xe={};async function ll(l){return Xe[l]==null&&(Xe[l]=await new Promise(e=>{window.require([l],e)})),Xe[l]}var Be=(l=>(l[l.NotDeleted=0]="NotDeleted",l[l.Deleted=1]="Deleted",l[l.DeletedForever=2]="DeletedForever",l))(Be||{});async function ft(l){let e=await ll("core/ajax");return await Promise.all(e.call(Array.from(l).map(({methodname:s,...r})=>({methodname:`local_mail_${s}`,args:r}))))}const Ve=["","blue","indigo","purple","pink","red","orange","yellow","green","teal","cyan"];function ut(l){const e=[{bytes:1099511627776,name:"TB"},{bytes:1073741824,name:"GB"},{bytes:1048576,name:"MB"},{bytes:1024,name:"KB"}];for(let t of e)if(l>=t.bytes)return`${Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(l/t.bytes)} ${t.name}`;return`${l} B`}function ct(l){return l.trim().replaceAll(/\s+/gu," ")}function qe(l,e){if(l=l||"",typeof e=="string"||typeof e=="number")l=l.replace("{$a}",e.toString());else for(const t in e)l=l.replace(`{$a->${t}}`,e[t].toString());return l}async function nl(l){return new Promise(e=>{setTimeout(e,l)})}var fe=(l=>(l[l.SM=576]="SM",l[l.MD=768]="MD",l[l.LG=992]="LG",l[l.XL=1200]="XL",l))(fe||{});async function rl(l){let e=0;const{subscribe:t,update:s}=sl({userid:l.userid,settings:l.settings,preferences:l.preferences,strings:l.strings,params:{type:"inbox"},menu:{unread:0,drafts:0,labels:[],courses:[]},list:{totalcount:0,messages:[],firstoffset:0,lastoffset:0,previousid:0,nextid:0},loading:!0,selectedMessageIds:new Set,targetMessageIds:new Set,toasts:[],navigationId:0,viewSize:0}),r={subscribe:t,get(){return Ks(this)},async callServicesAndRefresh(n,i,a=!1){var A;const o=++e;let f=i||r.get().params;const c=r.get().preferences.perpage;s(k=>({...k,loading:!0})),n.push({methodname:"get_menu"});const m=f.type=="course"?f.courseid||0:f.type=="label"&&f.labelid||0;n.push({methodname:"search_index",type:f.type,itemid:m,query:{...f.query,startid:((A=f.query)==null?void 0:A.startid)||f.messageid,limit:c}}),f.messageid&&(n.push({methodname:"set_unread",messageid:f.messageid,unread:!1}),n.push({methodname:"get_message",messageid:f.messageid}),n.push({methodname:"find_offset",type:f.type,itemid:m,messageid:f.messageid}));let d;try{d=await ft(n)}catch(k){return r.setError(k),[]}let b,v;f.messageid&&(b=d.pop(),v=d.pop(),d.pop());let _=d.pop();const h=d.pop();if(f.type=="course"&&!h.courses.find(k=>k.id==f.courseid)||f.type=="label"&&!h.labels.find(k=>k.id==f.labelid))return await r.navigate({type:"inbox"},!0),d;if(_.messages.length<c&&_.nextid){const k={methodname:"search_index",type:f.type,itemid:m,query:{...f.query,startid:_.nextid,backwards:!1,limit:c-_.messages.length}};let $;try{[$]=await ft([k])}catch(M){return r.setError(M),[]}_={totalcount:$.totalcount,messages:_.messages.concat($.messages),firstoffset:_.firstoffset,lastoffset:$.lastoffset,previousid:_.previousid,nextid:$.nextid}}if(o!=e)return d;f={...f,query:{...f.query,startid:_.messages.length>0?_.messages[0].id:void 0,backwards:!1}};let w,y;if(v){let k=_.messages.findIndex(j=>j.id==(v==null?void 0:v.id)),$,M;k>=0?($=k<_.messages.length-1?_.messages[k+1].id:_.nextid,M=k>0?_.messages[k-1].id:_.previousid):(k=_.messages.findIndex(j=>j.time<=v.time&&(j.time<v.time||j.id<v.id)),$=k<_.messages.length?_.messages[k].id:_.nextid,M=k>0?_.messages[k].id:_.previousid),$&&($==_.nextid?w={...f,messageid:$,query:{...f.query,startid:$,backwards:!1}}:w={...f,messageid:$}),M&&(M==_.previousid?y={...f,messageid:M,query:{...f.query,startid:M,backwards:!0}}:y={...f,messageid:M})}else _.nextid&&(w={...f,query:{...f.query,startid:_.nextid,backwards:!1}}),_.previousid&&(y={...f,query:{...f.query,startid:_.previousid,backwards:!0}});return s(k=>{const $=new Set(_.messages.filter(M=>k.selectedMessageIds.has(M.id)).map(M=>M.id));return{...k,params:f,menu:h,list:_,message:v,messageOffset:b,nextPageParams:w,prevPageParams:y,selectedMessageIds:$,targetMessageIds:f.messageid?new Set([f.messageid]):$,loading:!1}}),Ws(f,a),d},async createLabel(n,i){const a={methodname:"create_label",name:n,color:i};return(await r.callServicesAndRefresh([a])).pop()},async deleteLabel(n){const i={methodname:"delete_label",labelid:n};r.callServicesAndRefresh([i],{type:"inbox"})},async emptyTrash(){const n={methodname:"empty_trash"};await r.callServicesAndRefresh([n])},hideToast(n){s(i=>({...i,toasts:i.toasts.filter(a=>a!=n)}))},async init(){await r.callServicesAndRefresh([],vs())},async navigate(n,i=!1){await r.callServicesAndRefresh([],n,i),s(a=>({...a,navigationId:a.navigationId+1}))},async search(n){s(i=>({...i,params:{...i.params,query:n}})),await r.navigate()},selectAll(n){s(i=>{const a=new Set(i.list.messages.filter(o=>n=="all"||n=="read"&&!o.unread||n=="unread"&&o.unread||n=="starred"&&o.starred||n=="unstarred"&&!o.starred).map(o=>o.id));return{...i,selectedMessageIds:a,targetMessageIds:i.params.messageid?new Set([i.params.messageid]):a}})},async setDeleted(n,i,a){const o=n.map(c=>({methodname:"set_deleted",messageid:c,deleted:i}));let f={...r.get().params,messageid:void 0};if(await r.callServicesAndRefresh(o,f,!0),i!=Be.DeletedForever){const c=qe(r.get().strings[i?"undodelete":"undorestore"],n.length),m=()=>{r.setDeleted(n,i?Be.NotDeleted:Be.Deleted,!1)};r.showToast({text:c,undo:a?m:void 0})}},async setError(n){s(i=>({...i,loading:i.loading&&!n,error:n}))},async setLabels(n,i,a){const o=[];s(f=>({...f,messages:f.list.messages.map(c=>{if(n.includes(c.id)){const m=f.menu.labels.filter(d=>i.includes(d.id)?!0:a.includes(d.id)?!1:c.labels.findIndex(b=>b.id==d.id)>=0);return o.push({methodname:"set_labels",messageid:c.id,labelids:m.map(d=>d.id)}),{...c,labels:m}}else return c})})),await r.callServicesAndRefresh(o)},setViewportSize(n){s(i=>({...i,viewSize:n,navigationId:i.navigationId+1}))},async setPerPage(n){s(a=>({...a,preferences:{...a.preferences,perpage:n}}));const i={methodname:"set_preferences",preferences:{perpage:n}};await r.callServicesAndRefresh([i]),s(a=>({...a,navigationId:a.navigationId+1}))},async setStarred(n,i){s(o=>({...o,messages:o.list.messages.map(f=>n.includes(f.id)?{...f,starred:i}:f)}));const a=n.map(o=>({methodname:"set_starred",messageid:o,starred:i}));await r.callServicesAndRefresh(a)},async setUnread(n,i){const a={...r.get().params,messageid:void 0};s(f=>({...f,messages:f.list.messages.map(c=>n.includes(c.id)?{...c,unread:i}:c)}));const o=n.map(f=>({methodname:"set_unread",messageid:f,unread:i}));await r.callServicesAndRefresh(o,a)},async showToast(n){s(i=>({...i,toasts:[n]})),n&&(await nl(1e4),r.hideToast(n))},toggleSelected(n){s(i=>{const a=new Set(i.list.messages.filter(o=>o.id!=n&&i.selectedMessageIds.has(o.id)||o.id==n&&!i.selectedMessageIds.has(o.id)).map(o=>o.id));return{...i,selectedMessageIds:a,targetMessageIds:i.params.messageid?new Set([i.params.messageid]):a}})},async undo(n){n.undo&&(await n.undo(),r.hideToast(n))},async updateLabel(n,i,a){const o={methodname:"update_label",labelid:n,name:i,color:a};await r.callServicesAndRefresh([o])}};return await r.init(),r}function st(l,e){for(const t in e)window.jQuery(l).on(t,e[t]);return{destroy(){for(const t in e)window.jQuery(l).off(t,e[t])}}}function dt(l){var n,i;let e,t,s=((n=l[1].error)==null?void 0:n.debuginfo)&&mt(l),r=((i=l[1].error)==null?void 0:i.backtrace)&&gt(l);return{c(){e=p("div"),s&&s.c(),t=I(),r&&r.c(),u(e,"class","modal-body")},m(a,o){S(a,e,o),s&&s.m(e,null),g(e,t),r&&r.m(e,null)},p(a,o){var f,c;(f=a[1].error)!=null&&f.debuginfo?s?s.p(a,o):(s=mt(a),s.c(),s.m(e,t)):s&&(s.d(1),s=null),(c=a[1].error)!=null&&c.backtrace?r?r.p(a,o):(r=gt(a),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(a){a&&q(e),s&&s.d(),r&&r.d()}}}function mt(l){var r;let e,t=((r=l[1].error)==null?void 0:r.debuginfo)+"",s;return{c(){e=p("p"),s=R(t)},m(n,i){S(n,e,i),g(e,s)},p(n,i){var a;i&2&&t!==(t=((a=n[1].error)==null?void 0:a.debuginfo)+"")&&P(s,t)},d(n){n&&q(e)}}}function gt(l){var r;let e,t=((r=l[1].error)==null?void 0:r.backtrace)+"",s;return{c(){e=p("pre"),s=R(t)},m(n,i){S(n,e,i),g(e,s)},p(n,i){var a;i&2&&t!==(t=((a=n[1].error)==null?void 0:a.backtrace)+"")&&P(s,t)},d(n){n&&q(e)}}}function il(l){var w,y,A;let e,t,s,r,n,i=((w=l[1].error)==null?void 0:w.message)+"",a,o,f,c,m,d,b,v,_,h=(((y=l[1].error)==null?void 0:y.debuginfo)||((A=l[1].error)==null?void 0:A.backtrace))&&dt(l);return{c(){e=p("div"),t=p("div"),s=p("div"),r=p("div"),n=p("h5"),a=R(i),o=I(),f=p("button"),c=p("span"),c.textContent="×",d=I(),h&&h.c(),u(n,"class","modal-title"),u(n,"id","local-mail-error-modal-title"),u(c,"aria-hidden","true"),u(f,"type","button"),u(f,"class","close"),u(f,"data-dismiss","modal"),u(f,"aria-label",m=l[1].strings.close),u(r,"class","modal-header"),u(s,"class","modal-content"),u(t,"class","modal-dialog"),u(e,"class","modal fade"),u(e,"id","local-mail-error-modal"),u(e,"tabindex","-1"),u(e,"aria-labelledby","local-mail-error-modal-title"),u(e,"aria-hidden","true")},m(k,$){S(k,e,$),g(e,t),g(t,s),g(s,r),g(r,n),g(n,a),g(r,o),g(r,f),g(f,c),g(s,d),h&&h.m(s,null),v||(_=Fe(b=st.call(null,e,{"hidden.bs.modal":l[2]})),v=!0)},p(k,[$]){var M,j,D;$&2&&i!==(i=((M=k[1].error)==null?void 0:M.message)+"")&&P(a,i),$&2&&m!==(m=k[1].strings.close)&&u(f,"aria-label",m),(j=k[1].error)!=null&&j.debuginfo||(D=k[1].error)!=null&&D.backtrace?h?h.p(k,$):(h=dt(k),h.c(),h.m(s,null)):h&&(h.d(1),h=null),b&&Ae(b.update)&&$&1&&b.update.call(null,{"hidden.bs.modal":k[2]})},i:N,o:N,d(k){k&&q(e),h&&h.d(),v=!1,_()}}}function al(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(1,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=()=>{i.setError()};return l.$$set=o=>{"store"in o&&n(t(0,i=o.store))},l.$$.update=()=>{l.$$.dirty&2&&s.error&&window.jQuery("#local-mail-error-modal").modal()},[i,s,a]}class ol extends ne{constructor(e){super(),re(this,e,al,il,le,{store:0})}}function fl(l){let e,t,s,r,n,i;return{c(){e=p("button"),t=p("i"),u(t,"class","fa fa-fw fa-trash"),u(e,"type","button"),u(e,"class","local-mail-action-delete btn flex-grow-0"),e.disabled=s=!l[2].targetMessageIds.size,u(e,"title",r=l[2].strings.delete),C(e,"btn-secondary",!l[1]),C(e,"disabled",!l[2].targetMessageIds.size)},m(a,o){S(a,e,o),g(e,t),n||(i=J(e,"click",l[3]),n=!0)},p(a,[o]){o&4&&s!==(s=!a[2].targetMessageIds.size)&&(e.disabled=s),o&4&&r!==(r=a[2].strings.delete)&&u(e,"title",r),o&2&&C(e,"btn-secondary",!a[1]),o&4&&C(e,"disabled",!a[2].targetMessageIds.size)},i:N,o:N,d(a){a&&q(e),n=!1,i()}}}function ul(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,f=>t(2,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{transparent:a=!1}=e;const o=()=>i.setDeleted(Array.from(s.targetMessageIds.values()),Be.Deleted,!0);return l.$$set=f=>{"store"in f&&n(t(0,i=f.store)),"transparent"in f&&t(1,a=f.transparent)},[i,a,s,o]}class zs extends ne{constructor(e){super(),re(this,e,ul,fl,le,{store:0,transparent:1})}}function cl(l){let e,t,s,r,n,i,a,o,f,c,m,d,b,v,_,h,w,y,A,k,$,M,j;return{c(){e=p("div"),t=p("div"),s=p("div"),r=p("div"),n=p("h5"),i=R(l[1]),o=I(),f=p("button"),c=p("span"),c.textContent="×",m=I(),d=p("div"),b=R(l[2]),v=I(),_=p("div"),h=p("button"),w=R(l[4]),y=I(),A=p("button"),k=R(l[3]),u(n,"class","modal-title"),u(n,"id",a=l[0]+"-title"),u(c,"aria-hidden","true"),u(f,"type","button"),u(f,"class","close"),u(f,"data-dismiss","modal"),u(f,"aria-label",l[4]),u(r,"class","modal-header"),u(d,"class","modal-body"),u(h,"type","button"),u(h,"class","btn btn-secondary"),u(h,"data-dismiss","modal"),u(A,"type","button"),u(A,"class","btn btn-danger"),u(A,"data-dismiss","modal"),u(_,"class","modal-footer"),u(s,"class","modal-content"),u(t,"class","modal-dialog"),u(e,"class","modal fade"),u(e,"id",l[0]),u(e,"tabindex","-1"),u(e,"aria-labelledby",$=l[0]+"-title"),u(e,"aria-hidden","true")},m(D,O){S(D,e,O),g(e,t),g(t,s),g(s,r),g(r,n),g(n,i),g(r,o),g(r,f),g(f,c),g(s,m),g(s,d),g(d,b),g(s,v),g(s,_),g(_,h),g(h,w),g(_,y),g(_,A),g(A,k),M||(j=J(A,"click",l[6]),M=!0)},p(D,[O]){O&2&&P(i,D[1]),O&1&&a!==(a=D[0]+"-title")&&u(n,"id",a),O&16&&u(f,"aria-label",D[4]),O&4&&P(b,D[2]),O&16&&P(w,D[4]),O&8&&P(k,D[3]),O&1&&u(e,"id",D[0]),O&1&&$!==($=D[0]+"-title")&&u(e,"aria-labelledby",$)},i:N,o:N,d(D){D&&q(e),M=!1,j()}}}function dl(l,e,t){let{id:s}=e,{title:r}=e,{body:n}=e,{confirmText:i}=e,{cancelText:a}=e,{confirmCallback:o}=e;const f=()=>o();return l.$$set=c=>{"id"in c&&t(0,s=c.id),"title"in c&&t(1,r=c.title),"body"in c&&t(2,n=c.body),"confirmText"in c&&t(3,i=c.confirmText),"cancelText"in c&&t(4,a=c.cancelText),"confirmCallback"in c&&t(5,o=c.confirmCallback)},[s,r,n,i,a,o,f]}class lt extends ne{constructor(e){super(),re(this,e,dl,cl,le,{id:0,title:1,body:2,confirmText:3,cancelText:4,confirmCallback:5})}}function ml(l){let e,t,s,r,n,i,a;return i=new lt({props:{id:"local-mail-action-delete-forever-modal",title:l[2].strings.deleteforever,body:qe(l[2].strings.messagesdeleteconfirm,l[2].targetMessageIds.size),cancelText:l[2].strings.cancel,confirmText:l[2].strings.deleteforever,confirmCallback:l[3]}}),{c(){e=p("button"),t=p("i"),n=I(),Q(i.$$.fragment),u(t,"class","fa fa-fw fa-trash"),u(e,"type","button"),u(e,"class","local-mail-action-delete-forever btn flex-grow-0"),e.disabled=s=!l[2].targetMessageIds.size,u(e,"title",r=l[2].strings.deleteforever),u(e,"data-toggle","modal"),u(e,"data-target","#local-mail-action-delete-forever-modal"),C(e,"btn-secondary",!l[1]),C(e,"disabled",!l[2].targetMessageIds.size)},m(o,f){S(o,e,f),g(e,t),S(o,n,f),F(i,o,f),a=!0},p(o,[f]){(!a||f&4&&s!==(s=!o[2].targetMessageIds.size))&&(e.disabled=s),(!a||f&4&&r!==(r=o[2].strings.deleteforever))&&u(e,"title",r),(!a||f&2)&&C(e,"btn-secondary",!o[1]),(!a||f&4)&&C(e,"disabled",!o[2].targetMessageIds.size);const c={};f&4&&(c.title=o[2].strings.deleteforever),f&4&&(c.body=qe(o[2].strings.messagesdeleteconfirm,o[2].targetMessageIds.size)),f&4&&(c.cancelText=o[2].strings.cancel),f&4&&(c.confirmText=o[2].strings.deleteforever),f&5&&(c.confirmCallback=o[3]),i.$set(c)},i(o){a||(z(i.$$.fragment,o),a=!0)},o(o){L(i.$$.fragment,o),a=!1},d(o){o&&q(e),o&&q(n),G(i,o)}}}function gl(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,f=>t(2,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{transparent:a=!1}=e;const o=()=>i.setDeleted(Array.from(s.targetMessageIds.values()),Be.DeletedForever,!0);return l.$$set=f=>{"store"in f&&n(t(0,i=f.store)),"transparent"in f&&t(1,a=f.transparent)},[i,a,s,o]}class js extends ne{constructor(e){super(),re(this,e,gl,ml,le,{store:0,transparent:1})}}function _t(l,e,t){const s=l.slice();return s[19]=e[t],s}function _l(l){let e;return{c(){e=p("span"),e.textContent="a",u(e,"aria-hidden","true")},m(t,s){S(t,e,s)},d(t){t&&q(e)}}}function bl(l){let e;return{c(){e=p("i"),u(e,"class","fa fa-check local-mail-label-modal-color-option-check")},m(t,s){S(t,e,s)},d(t){t&&q(e)}}}function bt(l,e){let t,s,r,n,i,a;function o(d,b){return d[19]==d[6]?bl:_l}let f=o(e),c=f(e);function m(){return e[14](e[19])}return{key:l,first:null,c(){t=p("button"),c.c(),s=I(),u(t,"role","radio"),u(t,"aria-checked",r=e[19]==e[6]),u(t,"tabindex","0"),u(t,"title",n=e[4].strings[`color${e[19]}`]),u(t,"class","local-mail-label-modal-color-option btn svelte-cky3j8"),u(t,"style",`color: var(--local-mail-color-${e[19]}-fg, var(--local-mail-color-gray-fg));background-color: var(--local-mail-color-${e[19]}-bg, var(--local-mail-color-gray-bg))`),this.first=t},m(d,b){S(d,t,b),c.m(t,null),g(t,s),i||(a=J(t,"click",Re(m)),i=!0)},p(d,b){e=d,f!==(f=o(e))&&(c.d(1),c=f(e),c&&(c.c(),c.m(t,s))),b&64&&r!==(r=e[19]==e[6])&&u(t,"aria-checked",r),b&16&&n!==(n=e[4].strings[`color${e[19]}`])&&u(t,"title",n)},d(d){d&&q(t),c.d(),i=!1,a()}}}function pl(l){let e,t,s,r,n,i=l[4].strings[l[1]?"editlabel":"newlabel"]+"",a,o,f,c,m,d,b,v,_,h,w,y=l[4].strings.labelname+"",A,k,$,M,j,D,O=l[4].strings[l[3]?"errorrepeatedlabelname":"erroremptylabelname"]+"",x,V,K,Y,H,ee,te=l[4].strings.labelcolor+"",W,U,B,T,Z=[],me=new Map,be,ae,E,se,ke=l[4].strings.cancel+"",pe,$e,_e,ye=l[4].strings[l[1]?"save":"create"]+"",Te,De,Ie,Me,je,He,we=Ve;const Ne=X=>X[19];for(let X=0;X<we.length;X+=1){let ie=_t(l,we,X),Se=Ne(ie);me.set(Se,Z[X]=bt(Se,ie))}return{c(){e=p("div"),t=p("div"),s=p("div"),r=p("div"),n=p("h5"),a=R(i),f=I(),c=p("button"),m=p("span"),m.textContent="×",b=I(),v=p("div"),_=p("form"),h=p("div"),w=p("label"),A=R(y),k=I(),$=p("input"),j=I(),D=p("div"),x=R(O),V=I(),K=p("div"),K.textContent=" ",Y=I(),H=p("div"),ee=p("label"),W=R(te),B=I(),T=p("div");for(let X=0;X<Z.length;X+=1)Z[X].c();ae=I(),E=p("div"),se=p("button"),pe=R(ke),$e=I(),_e=p("button"),Te=R(ye),u(n,"class","modal-title"),u(n,"id",o=l[7]+"-title"),u(m,"aria-hidden","true"),u(c,"type","button"),u(c,"class","close"),u(c,"data-dismiss","modal"),u(c,"aria-label",d=l[4].strings.cancel),u(r,"class","modal-header"),u(w,"for","local-mail-label-modal-name"),u($,"type","text"),$.required=!0,u($,"class","form-control is-invalid"),u($,"id",M=l[7]+"-name"),C($,"is-valid",l[8]),C($,"is-invalid",!l[8]),u(D,"class","invalid-feedback"),u(K,"class","valid-feedback"),u(h,"class","form-group"),u(ee,"for",U=l[7]+"-color"),u(T,"role","radiogroup"),u(T,"class","local-mail-label-modal-color svelte-cky3j8"),u(T,"id",be=l[7]+"-color"),u(H,"class","form-group"),u(v,"class","modal-body"),u(se,"type","button"),u(se,"class","btn btn-secondary"),u(se,"data-dismiss","modal"),u(_e,"type","button"),_e.disabled=De=!l[8],u(_e,"class","btn btn-primary"),u(_e,"data-dismiss","modal"),u(E,"class","modal-footer"),u(s,"class","modal-content"),u(t,"class","modal-dialog"),u(e,"class","modal fade"),u(e,"id",l[7]),u(e,"tabindex","-1"),u(e,"aria-labelledby",Ie=l[7]+"-title"),u(e,"aria-hidden","true")},m(X,ie){S(X,e,ie),g(e,t),g(t,s),g(s,r),g(r,n),g(n,a),g(r,f),g(r,c),g(c,m),g(s,b),g(s,v),g(v,_),g(_,h),g(h,w),g(w,A),g(h,k),g(h,$),l[12]($),ze($,l[2]),g(h,j),g(h,D),g(D,x),g(h,V),g(h,K),g(_,Y),g(_,H),g(H,ee),g(ee,W),g(H,B),g(H,T);for(let Se=0;Se<Z.length;Se+=1)Z[Se]&&Z[Se].m(T,null);g(s,ae),g(s,E),g(E,se),g(se,pe),g(E,$e),g(E,_e),g(_e,Te),je||(He=[J($,"input",l[13]),J(_,"submit",Re(l[15])),J(_e,"click",l[16]),Fe(Me=st.call(null,e,{"shown.bs.modal":l[17],"hidden.bs.modal":l[18]}))],je=!0)},p(X,[ie]){ie&18&&i!==(i=X[4].strings[X[1]?"editlabel":"newlabel"]+"")&&P(a,i),ie&128&&o!==(o=X[7]+"-title")&&u(n,"id",o),ie&16&&d!==(d=X[4].strings.cancel)&&u(c,"aria-label",d),ie&16&&y!==(y=X[4].strings.labelname+"")&&P(A,y),ie&128&&M!==(M=X[7]+"-name")&&u($,"id",M),ie&4&&$.value!==X[2]&&ze($,X[2]),ie&256&&C($,"is-valid",X[8]),ie&256&&C($,"is-invalid",!X[8]),ie&24&&O!==(O=X[4].strings[X[3]?"errorrepeatedlabelname":"erroremptylabelname"]+"")&&P(x,O),ie&16&&te!==(te=X[4].strings.labelcolor+"")&&P(W,te),ie&128&&U!==(U=X[7]+"-color")&&u(ee,"for",U),ie&80&&(we=Ve,Z=Le(Z,ie,Ne,1,X,we,me,T,Je,bt,null,_t)),ie&128&&be!==(be=X[7]+"-color")&&u(T,"id",be),ie&16&&ke!==(ke=X[4].strings.cancel+"")&&P(pe,ke),ie&18&&ye!==(ye=X[4].strings[X[1]?"save":"create"]+"")&&P(Te,ye),ie&256&&De!==(De=!X[8])&&(_e.disabled=De),ie&128&&u(e,"id",X[7]),ie&128&&Ie!==(Ie=X[7]+"-title")&&u(e,"aria-labelledby",Ie),Me&&Ae(Me.update)&&ie&32&&Me.update.call(null,{"shown.bs.modal":X[17],"hidden.bs.modal":X[18]})},i:N,o:N,d(X){X&&q(e),l[12](null);for(let ie=0;ie<Z.length;ie+=1)Z[ie].d();je=!1,Ge(He)}}}function hl(l,e,t){let s,r,n,i,a,o,f,c=N,m=()=>(c(),c=oe(d,D=>t(4,f=D)),d);l.$$.on_destroy.push(()=>c());let{store:d}=e;m();let{label:b=void 0}=e,v;const _=()=>{t(2,r=(b==null?void 0:b.name)||""),t(6,n=(b==null?void 0:b.color)||Ve[0])},h=async()=>{if(window.jQuery(`#${s}`).modal("hide"),b)d.updateLabel(b.id,r,n);else{const D=await d.createLabel(r,n);D&&d.setLabels(Array.from(f.targetMessageIds.values()),[D],[])}};function w(D){Oe[D?"unshift":"push"](()=>{v=D,t(5,v)})}function y(){r=this.value,t(2,r),t(1,b)}const A=D=>{t(6,n=D)},k=()=>h(),$=()=>h(),M=()=>{v.focus()},j=()=>{_()};return l.$$set=D=>{"store"in D&&m(t(0,d=D.store)),"label"in D&&t(1,b=D.label)},l.$$.update=()=>{l.$$.dirty&2&&t(7,s=`local-mail-label-modal-${(b==null?void 0:b.id)||"new"}`),l.$$.dirty&2&&t(2,r=(b==null?void 0:b.name)||""),l.$$.dirty&2&&t(6,n=(b==null?void 0:b.color)||Ve[0]),l.$$.dirty&4&&t(11,i=ct(r)==""),l.$$.dirty&22&&t(3,a=f.menu.labels.some(D=>D.id!=(b==null?void 0:b.id)&&D.name==ct(r))),l.$$.dirty&2056&&t(8,o=!i&&!a)},[d,b,r,a,f,v,n,s,o,_,h,i,w,y,A,k,$,M,j]}class As extends ne{constructor(e){super(),re(this,e,hl,pl,le,{store:0,label:1})}}const{Map:vl}=ks;function pt(l,e,t){const s=l.slice();return s[11]=e[t],s}function ht(l,e){let t,s,r,n,i=e[11].name+"",a,o,f;function c(){return e[9](e[11])}return{key:l,first:null,c(){t=p("button"),s=p("i"),n=I(),a=R(i),u(s,"class",r="fa fa-fw "+e[4](e[11].id)+" svelte-ufjoxg"),u(t,"type","button"),u(t,"class","dropdown-item local-mail-action-label-button-item"),this.first=t},m(m,d){S(m,t,d),g(t,s),g(t,n),g(t,a),o||(f=J(t,"click",Xs(c)),o=!0)},p(m,d){e=m,d&24&&r!==(r="fa fa-fw "+e[4](e[11].id)+" svelte-ufjoxg")&&u(s,"class",r),d&8&&i!==(i=e[11].name+"")&&P(a,i)},d(m){m&&q(t),o=!1,f()}}}function vt(l){let e;return{c(){e=p("div"),u(e,"class","dropdown-divider")},m(t,s){S(t,e,s)},d(t){t&&q(e)}}}function kl(l){let e,t=l[3].strings.newlabel+"",s;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item local-mail-action-label-button-item"),u(e,"data-toggle","modal"),u(e,"data-target","#local-mail-label-modal-new")},m(r,n){S(r,e,n),g(e,s)},p(r,n){n&8&&t!==(t=r[3].strings.newlabel+"")&&P(s,t)},d(r){r&&q(e)}}}function wl(l){let e,t=l[3].strings.applychanges+"",s,r,n;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item local-mail-action-label-button-item")},m(i,a){S(i,e,a),g(e,s),r||(n=J(e,"click",l[10]),r=!0)},p(i,a){a&8&&t!==(t=i[3].strings.applychanges+"")&&P(s,t)},d(i){i&&q(e),r=!1,n()}}}function $l(l){let e,t,s,r,n,i,a,o=[],f=new vl,c,m,d,b,v,_=l[3].menu.labels;const h=$=>$[11].id;for(let $=0;$<_.length;$+=1){let M=pt(l,_,$),j=h(M);f.set(j,o[$]=ht(j,M))}let w=l[3].menu.labels.length>0&&vt();function y($,M){return $[5]?wl:kl}let A=y(l),k=A(l);return b=new As({props:{store:l[0]}}),{c(){e=p("div"),t=p("button"),s=p("i"),i=I(),a=p("div");for(let $=0;$<o.length;$+=1)o[$].c();c=I(),w&&w.c(),m=I(),k.c(),d=I(),Q(b.$$.fragment),u(s,"class","fa fa-fw fa-tag"),u(t,"type","button"),u(t,"class","local-mail-action-label-button btn dropdown-toggle svelte-ufjoxg"),t.disabled=r=!l[3].targetMessageIds.size,u(t,"data-toggle","dropdown"),u(t,"aria-expanded","false"),u(t,"title",n=l[3].strings.labels),C(t,"btn-secondary",!l[1]),C(t,"disabled",!l[3].targetMessageIds.size),u(a,"class","dropdown-menu"),u(e,"class","btn-group"),u(e,"role","group"),C(e,"dropup",l[2])},m($,M){S($,e,M),g(e,t),g(t,s),g(e,i),g(e,a);for(let j=0;j<o.length;j+=1)o[j]&&o[j].m(a,null);g(a,c),w&&w.m(a,null),g(a,m),k.m(a,null),g(e,d),F(b,e,null),v=!0},p($,[M]){(!v||M&8&&r!==(r=!$[3].targetMessageIds.size))&&(t.disabled=r),(!v||M&8&&n!==(n=$[3].strings.labels))&&u(t,"title",n),(!v||M&2)&&C(t,"btn-secondary",!$[1]),(!v||M&8)&&C(t,"disabled",!$[3].targetMessageIds.size),M&88&&(_=$[3].menu.labels,o=Le(o,M,h,1,$,_,f,a,Je,ht,c,pt)),$[3].menu.labels.length>0?w||(w=vt(),w.c(),w.m(a,m)):w&&(w.d(1),w=null),A===(A=y($))&&k?k.p($,M):(k.d(1),k=A($),k&&(k.c(),k.m(a,null)));const j={};M&1&&(j.store=$[0]),b.$set(j),(!v||M&4)&&C(e,"dropup",$[2])},i($){v||(z(b.$$.fragment,$),v=!0)},o($){L(b.$$.fragment,$),v=!1},d($){$&&q(e);for(let M=0;M<o.length;M+=1)o[M].d();w&&w.d(),k.d(),G(b)}}}function yl(l,e,t){let s,r,n,i=N,a=()=>(i(),i=oe(o,h=>t(3,n=h)),o);l.$$.on_destroy.push(()=>i());let{store:o}=e;a();let{transparent:f=!1}=e,{dropup:c=!1}=e,m=new Map;const d=h=>{t(8,m=new Map(Array.from(m.entries()).map(([w,y])=>[w,w==h?y=="true"?"false":"true":y])))},b=()=>{o.setLabels(Array.from(n.targetMessageIds.values()),Array.from(m.keys()).filter(h=>m.get(h)=="true"),Array.from(m.keys()).filter(h=>m.get(h)=="false"))},v=h=>d(h.id),_=()=>b();return l.$$set=h=>{"store"in h&&a(t(0,o=h.store)),"transparent"in h&&t(1,f=h.transparent),"dropup"in h&&t(2,c=h.dropup)},l.$$.update=()=>{l.$$.dirty&8&&t(8,m=new Map(n.menu.labels.map(h=>{const w=n.list.messages.filter(y=>n.targetMessageIds.has(y.id)&&y.labels.some(A=>A.id==h.id));return[h.id,w.length==0?"false":w.length<n.targetMessageIds.size?"mixed":"true"]}))),l.$$.dirty&264&&t(5,s=Array.from(m.entries()).some(([h,w])=>n.list.messages.some(y=>n.targetMessageIds.has(y.id)&&(w=="true"&&y.labels.every(A=>A.id!=h)||w=="false"&&y.labels.some(A=>A.id==h))))),l.$$.dirty&256&&t(4,r=h=>m.get(h)=="false"?"fa-square-o":m.get(h)=="mixed"?"fa-minus-square-o":"fa-check-square-o")},[o,f,c,n,r,s,d,b,m,v,_]}class Ls extends ne{constructor(e){super(),re(this,e,yl,$l,le,{store:0,transparent:1,dropup:2})}}function Ml(l){let e,t,s,r,n,i=l[5]&&kt(l),a=l[6]&&wt(l),o=l[3]&&$t(l),f=l[4]&&yt(l),c=l[7]&&Mt(l);return{c(){i&&i.c(),e=I(),a&&a.c(),t=I(),o&&o.c(),s=I(),f&&f.c(),r=I(),c&&c.c(),n=ve()},m(m,d){i&&i.m(m,d),S(m,e,d),a&&a.m(m,d),S(m,t,d),o&&o.m(m,d),S(m,s,d),f&&f.m(m,d),S(m,r,d),c&&c.m(m,d),S(m,n,d)},p(m,d){m[5]?i?i.p(m,d):(i=kt(m),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),m[6]?a?a.p(m,d):(a=wt(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),m[3]?o?o.p(m,d):(o=$t(m),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),m[4]?f?f.p(m,d):(f=yt(m),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),m[7]?c?c.p(m,d):(c=Mt(m),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(m){i&&i.d(m),m&&q(e),a&&a.d(m),m&&q(t),o&&o.d(m),m&&q(s),f&&f.d(m),m&&q(r),c&&c.d(m),m&&q(n)}}}function Il(l){let e,t=l[8].strings.emptytrash+"",s;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item"),u(e,"data-toggle","modal"),u(e,"data-target","#local-mail-action-empty-trash-modal")},m(r,n){S(r,e,n),g(e,s)},p(r,n){n&256&&t!==(t=r[8].strings.emptytrash+"")&&P(s,t)},d(r){r&&q(e)}}}function kt(l){let e,t=l[8].strings.markasread+"",s,r,n;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item")},m(i,a){S(i,e,a),g(e,s),r||(n=J(e,"click",l[12]),r=!0)},p(i,a){a&256&&t!==(t=i[8].strings.markasread+"")&&P(s,t)},d(i){i&&q(e),r=!1,n()}}}function wt(l){let e,t=l[8].strings.markasunread+"",s,r,n;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item")},m(i,a){S(i,e,a),g(e,s),r||(n=J(e,"click",l[13]),r=!0)},p(i,a){a&256&&t!==(t=i[8].strings.markasunread+"")&&P(s,t)},d(i){i&&q(e),r=!1,n()}}}function $t(l){let e,t=l[8].strings.markasstarred+"",s,r,n;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item")},m(i,a){S(i,e,a),g(e,s),r||(n=J(e,"click",l[14]),r=!0)},p(i,a){a&256&&t!==(t=i[8].strings.markasstarred+"")&&P(s,t)},d(i){i&&q(e),r=!1,n()}}}function yt(l){let e,t=l[8].strings.markasunstarred+"",s,r,n;return{c(){e=p("button"),s=R(t),u(e,"type","button"),u(e,"class","dropdown-item")},m(i,a){S(i,e,a),g(e,s),r||(n=J(e,"click",l[15]),r=!0)},p(i,a){a&256&&t!==(t=i[8].strings.markasunstarred+"")&&P(s,t)},d(i){i&&q(e),r=!1,n()}}}function Mt(l){let e,t,s=l[8].strings.editlabel+"",r,n,i,a,o=l[8].strings.deletelabel+"",f,c=(l[5]||l[6]||l[3]||l[4])&&It();return{c(){c&&c.c(),e=I(),t=p("button"),r=R(s),i=I(),a=p("button"),f=R(o),u(t,"type","button"),u(t,"class","dropdown-item"),u(t,"data-toggle","modal"),u(t,"data-target",n="#local-mail-label-modal-"+l[8].params.labelid),u(a,"type","button"),u(a,"class","dropdown-item"),u(a,"data-toggle","modal"),u(a,"data-target","#local-mail-action-delete-label-modal")},m(m,d){c&&c.m(m,d),S(m,e,d),S(m,t,d),g(t,r),S(m,i,d),S(m,a,d),g(a,f)},p(m,d){m[5]||m[6]||m[3]||m[4]?c||(c=It(),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),d&256&&s!==(s=m[8].strings.editlabel+"")&&P(r,s),d&256&&n!==(n="#local-mail-label-modal-"+m[8].params.labelid)&&u(t,"data-target",n),d&256&&o!==(o=m[8].strings.deletelabel+"")&&P(f,o)},d(m){c&&c.d(m),m&&q(e),m&&q(t),m&&q(i),m&&q(a)}}}function It(l){let e;return{c(){e=p("div"),u(e,"class","dropdown-divider")},m(t,s){S(t,e,s)},d(t){t&&q(e)}}}function Sl(l){let e,t,s,r;return e=new As({props:{store:l[0],label:l[7]}}),s=new lt({props:{id:"local-mail-action-delete-label-modal",title:l[8].strings.deletelabel,body:qe(l[8].strings.labeldeleteconfirm,l[7].name),cancelText:l[8].strings.cancel,confirmText:l[8].strings.deletelabel,confirmCallback:l[17]}}),{c(){Q(e.$$.fragment),t=I(),Q(s.$$.fragment)},m(n,i){F(e,n,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),i&128&&(a.label=n[7]),e.$set(a);const o={};i&256&&(o.title=n[8].strings.deletelabel),i&384&&(o.body=qe(n[8].strings.labeldeleteconfirm,n[7].name)),i&256&&(o.cancelText=n[8].strings.cancel),i&256&&(o.confirmText=n[8].strings.deletelabel),i&257&&(o.confirmCallback=n[17]),s.$set(o)},i(n){r||(z(e.$$.fragment,n),z(s.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),r=!1},d(n){G(e,n),n&&q(t),G(s,n)}}}function ql(l){let e,t;return e=new lt({props:{id:"local-mail-action-empty-trash-modal",title:l[8].strings.emptytrash,body:qe(l[8].strings.messagesdeleteconfirm,l[8].list.totalcount),cancelText:l[8].strings.cancel,confirmText:l[8].strings.emptytrash,confirmCallback:l[16]}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&256&&(n.title=s[8].strings.emptytrash),r&256&&(n.body=qe(s[8].strings.messagesdeleteconfirm,s[8].list.totalcount)),r&256&&(n.cancelText=s[8].strings.cancel),r&256&&(n.confirmText=s[8].strings.emptytrash),r&1&&(n.confirmCallback=s[16]),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function zl(l){let e,t,s,r,n,i,a,o,f,c;function m(w,y){return w[8].params.type=="trash"?Il:Ml}let d=m(l),b=d(l);const v=[ql,Sl],_=[];function h(w,y){return w[8].params.type=="trash"?0:w[7]?1:-1}return~(o=h(l))&&(f=_[o]=v[o](l)),{c(){e=p("div"),t=p("button"),s=p("i"),n=I(),i=p("div"),b.c(),a=I(),f&&f.c(),u(s,"class","fa fa-fw fa-ellipsis-v"),u(t,"type","button"),u(t,"class","local-mail-action-more-button btn dropdown-toggle svelte-kx0nzt"),t.disabled=l[9],u(t,"data-toggle","dropdown"),u(t,"aria-expanded","false"),u(t,"title",r=l[8].strings.moreactions),C(t,"btn-secondary",!l[1]),C(t,"disabled",l[9]),u(i,"class","dropdown-menu"),u(e,"class","btn-group"),C(e,"dropup",l[2])},m(w,y){S(w,e,y),g(e,t),g(t,s),g(e,n),g(e,i),b.m(i,null),g(e,a),~o&&_[o].m(e,null),c=!0},p(w,[y]){(!c||y&512)&&(t.disabled=w[9]),(!c||y&256&&r!==(r=w[8].strings.moreactions))&&u(t,"title",r),(!c||y&2)&&C(t,"btn-secondary",!w[1]),(!c||y&512)&&C(t,"disabled",w[9]),d===(d=m(w))&&b?b.p(w,y):(b.d(1),b=d(w),b&&(b.c(),b.m(i,null)));let A=o;o=h(w),o===A?~o&&_[o].p(w,y):(f&&(ce(),L(_[A],1,1,()=>{_[A]=null}),de()),~o?(f=_[o],f?f.p(w,y):(f=_[o]=v[o](w),f.c()),z(f,1),f.m(e,null)):f=null),(!c||y&4)&&C(e,"dropup",w[2])},i(w){c||(z(f),c=!0)},o(w){L(f),c=!1},d(w){w&&q(e),b.d(),~o&&_[o].d()}}}function jl(l,e,t){let s,r,n,i,a,o,f,c=N,m=()=>(c(),c=oe(d,j=>t(8,f=j)),d);l.$$.on_destroy.push(()=>c());let{store:d}=e;m();let{transparent:b=!1}=e,{dropup:v=!1}=e;const _=j=>{d.setUnread(Array.from(f.targetMessageIds.values()),j)},h=j=>{d.setStarred(Array.from(f.targetMessageIds.values()),j)},w=()=>_(!1),y=()=>_(!0),A=()=>h(!0),k=()=>h(!1),$=()=>d.emptyTrash(),M=()=>d.deleteLabel(f.params.labelid||0);return l.$$set=j=>{"store"in j&&m(t(0,d=j.store)),"transparent"in j&&t(1,b=j.transparent),"dropup"in j&&t(2,v=j.dropup)},l.$$.update=()=>{l.$$.dirty&256&&t(7,s=f.params.type=="label"&&f.message==null?f.menu.labels.find(j=>j.id==f.params.labelid):null),l.$$.dirty&256&&t(6,r=f.list.messages.some(j=>f.targetMessageIds.has(j.id)&&!j.unread)),l.$$.dirty&256&&t(5,n=f.list.messages.some(j=>f.targetMessageIds.has(j.id)&&j.unread)),l.$$.dirty&256&&t(4,i=f.list.messages.some(j=>f.targetMessageIds.has(j.id)&&j.starred)),l.$$.dirty&256&&t(3,a=f.list.messages.some(j=>f.targetMessageIds.has(j.id)&&!j.starred)),l.$$.dirty&504&&t(9,o=f.params.type=="trash"?!f.list.totalcount:!s&&!r&&!n&&!i&&!a)},[d,b,v,a,i,n,r,s,f,o,_,h,w,y,A,k,$,M]}class Ts extends ne{constructor(e){super(),re(this,e,jl,zl,le,{store:0,transparent:1,dropup:2})}}function St(l){let e,t;return{c(){e=p("div"),t=R(l[4]),u(e,"class","text-truncate align-self-center mx-3")},m(s,r){S(s,e,r),g(e,t)},p(s,r){r&16&&P(t,s[4])},d(s){s&&q(e)}}}function qt(l){let e,t;return{c(){e=p("div"),t=R(l[4]),u(e,"class","text-truncate align-self-center mx-2")},m(s,r){S(s,e,r),g(e,t)},p(s,r){r&16&&P(t,s[4])},d(s){s&&q(e)}}}function Al(l){let e,t,s,r,n,i,a,o,f,c,m,d,b,v,_,h,w=!l[2]&&St(l),y=l[2]&&qt(l);return{c(){w&&w.c(),e=I(),t=p("div"),s=p("button"),r=p("i"),o=I(),y&&y.c(),f=I(),c=p("button"),m=p("i"),u(r,"class","fa fa-w fa-chevron-left"),u(r,"aria-label",n=l[3].strings.previouspage),u(s,"class","btn btn-secondary"),s.disabled=i=!l[3].prevPageParams,u(s,"title",a=l[3].strings.previouspage),C(s,"btn-secondary",!l[1]),u(m,"class","fa fa-w fa-chevron-right"),u(m,"aria-label",d=l[3].strings.nextpage),u(c,"class","btn"),c.disabled=b=!l[3].nextPageParams,u(c,"title",v=l[3].strings.nextpage),C(c,"btn-secondary",!l[1]),u(t,"class","local-mail-paging-buttons btn-group d-flex flex-shrink-1 svelte-jmuw7v"),u(t,"role","group"),C(t,"btn-group",!l[2])},m(A,k){w&&w.m(A,k),S(A,e,k),S(A,t,k),g(t,s),g(s,r),g(t,o),y&&y.m(t,null),g(t,f),g(t,c),g(c,m),_||(h=[J(s,"click",Re(l[5])),J(c,"click",Re(l[6]))],_=!0)},p(A,[k]){A[2]?w&&(w.d(1),w=null):w?w.p(A,k):(w=St(A),w.c(),w.m(e.parentNode,e)),k&8&&n!==(n=A[3].strings.previouspage)&&u(r,"aria-label",n),k&8&&i!==(i=!A[3].prevPageParams)&&(s.disabled=i),k&8&&a!==(a=A[3].strings.previouspage)&&u(s,"title",a),k&2&&C(s,"btn-secondary",!A[1]),A[2]?y?y.p(A,k):(y=qt(A),y.c(),y.m(t,f)):y&&(y.d(1),y=null),k&8&&d!==(d=A[3].strings.nextpage)&&u(m,"aria-label",d),k&8&&b!==(b=!A[3].nextPageParams)&&(c.disabled=b),k&8&&v!==(v=A[3].strings.nextpage)&&u(c,"title",v),k&2&&C(c,"btn-secondary",!A[1]),k&4&&C(t,"btn-group",!A[2])},i:N,o:N,d(A){w&&w.d(A),A&&q(e),A&&q(t),y&&y.d(),_=!1,Ge(h)}}}function Ll(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,d=>t(3,r=d)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{transparent:o=!1}=e,{compact:f=!1}=e;const c=()=>a.navigate(r.prevPageParams),m=()=>a.navigate(r.nextPageParams);return l.$$set=d=>{"store"in d&&i(t(0,a=d.store)),"transparent"in d&&t(1,o=d.transparent),"compact"in d&&t(2,f=d.compact)},l.$$.update=()=>{l.$$.dirty&8&&t(4,s=r.message?qe(r.strings.pagingsingle,{index:(r.messageOffset||0)+1,total:r.list.totalcount}):r.list.messages.length==0?"":qe(r.strings.pagingmultiple,{first:r.list.firstoffset+1,last:r.list.lastoffset+1,total:r.list.totalcount}))},[a,o,f,r,s,c,m]}class Ds extends ne{constructor(e){super(),re(this,e,Ll,Al,le,{store:0,transparent:1,compact:2})}}function Tl(l){let e,t,s,r,n,i;return{c(){e=p("button"),t=p("i"),u(t,"class","fa fa-fw fa-undo"),u(e,"type","button"),u(e,"class","local-mail-action-delete btn"),e.disabled=s=!l[2].targetMessageIds.size,u(e,"title",r=l[2].strings.restore),C(e,"btn-secondary",!l[1]),C(e,"disabled",!l[2].targetMessageIds.size)},m(a,o){S(a,e,o),g(e,t),n||(i=J(e,"click",l[3]),n=!0)},p(a,[o]){o&4&&s!==(s=!a[2].targetMessageIds.size)&&(e.disabled=s),o&4&&r!==(r=a[2].strings.restore)&&u(e,"title",r),o&2&&C(e,"btn-secondary",!a[1]),o&4&&C(e,"disabled",!a[2].targetMessageIds.size)},i:N,o:N,d(a){a&&q(e),n=!1,i()}}}function Dl(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,f=>t(2,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{transparent:a=!1}=e;const o=()=>i.setDeleted(Array.from(s.targetMessageIds.values()),Be.NotDeleted,!0);return l.$$set=f=>{"store"in f&&n(t(0,i=f.store)),"transparent"in f&&t(1,a=f.transparent)},[i,a,s,o]}class Ns extends ne{constructor(e){super(),re(this,e,Dl,Tl,le,{store:0,transparent:1})}}function Nl(l){let e,t,s,r;return e=new Ls({props:{store:l[0],transparent:!0,dropup:!0}}),s=new zs({props:{store:l[0],transparent:!0}}),{c(){Q(e.$$.fragment),t=I(),Q(s.$$.fragment)},m(n,i){F(e,n,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(z(e.$$.fragment,n),z(s.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),r=!1},d(n){G(e,n),n&&q(t),G(s,n)}}}function Bl(l){let e,t,s,r;return e=new Ns({props:{store:l[0],transparent:!0}}),s=new js({props:{store:l[0],transparent:!0}}),{c(){Q(e.$$.fragment),t=I(),Q(s.$$.fragment)},m(n,i){F(e,n,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(z(e.$$.fragment,n),z(s.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),r=!1},d(n){G(e,n),n&&q(t),G(s,n)}}}function Cl(l){let e,t,s,r,n,i,a,o,f,c,m;const d=[Bl,Nl],b=[];function v(_,h){return _[4].params.type=="trash"?0:1}return r=v(l),n=b[r]=d[r](l),a=new Ts({props:{store:l[0],transparent:!0,dropup:!0}}),f=new Ds({props:{store:l[0],transparent:!0,compact:!0}}),{c(){e=p("div"),t=p("div"),s=p("div"),n.c(),i=I(),Q(a.$$.fragment),o=I(),Q(f.$$.fragment),u(s,"class","w-100 d-flex justify-content-around"),u(s,"role","group"),u(t,"role","toolbar"),u(t,"class","local-mail-toolbar d-flex w-100 py-3 border-top"),Ke(()=>l[5].call(t)),C(t,"position-fixed",l[3]),C(t,"position-absolute",!l[3]),C(t,"fixed-bottom",l[3]),C(t,"border-bottom",!l[3]),C(t,"bg-white",!l[3]),C(t,"bg-light",l[3]),u(e,"class","row position-relative"),he(e,"height",l[1]+"px")},m(_,h){S(_,e,h),g(e,t),g(t,s),b[r].m(s,null),g(s,i),F(a,s,null),g(s,o),F(f,s,null),c=Ys(t,l[5].bind(t)),l[6](e),m=!0},p(_,[h]){let w=r;r=v(_),r===w?b[r].p(_,h):(ce(),L(b[w],1,1,()=>{b[w]=null}),de(),n=b[r],n?n.p(_,h):(n=b[r]=d[r](_),n.c()),z(n,1),n.m(s,i));const y={};h&1&&(y.store=_[0]),a.$set(y);const A={};h&1&&(A.store=_[0]),f.$set(A),(!m||h&8)&&C(t,"position-fixed",_[3]),(!m||h&8)&&C(t,"position-absolute",!_[3]),(!m||h&8)&&C(t,"fixed-bottom",_[3]),(!m||h&8)&&C(t,"border-bottom",!_[3]),(!m||h&8)&&C(t,"bg-white",!_[3]),(!m||h&8)&&C(t,"bg-light",_[3]),(!m||h&2)&&he(e,"height",_[1]+"px")},i(_){m||(z(n),z(a.$$.fragment,_),z(f.$$.fragment,_),m=!0)},o(_){L(n),L(a.$$.fragment,_),L(f.$$.fragment,_),m=!1},d(_){_&&q(e),b[r].d(),G(a),G(f),c(),l[6](null)}}}function Rl(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,d=>t(4,s=d)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let a,o,f=!1;ws(()=>{const d=new IntersectionObserver(b=>{for(const v of b)t(3,f=v.intersectionRatio<1&&v.boundingClientRect.top>=v.boundingClientRect.height)},{threshold:1});return d.observe(o),()=>d.disconnect()});function c(){a=this.offsetHeight,t(1,a)}function m(d){Oe[d?"unshift":"push"](()=>{o=d,t(2,o)})}return l.$$set=d=>{"store"in d&&n(t(0,i=d.store))},[i,a,o,f,s,c,m]}class Pl extends ne{constructor(e){super(),re(this,e,Rl,Cl,le,{store:0})}}function Bs(l){const e=l-1;return e*e*e+1}function Cs(l,{from:e,to:t},s={}){const r=getComputedStyle(l),n=r.transform==="none"?"":r.transform,[i,a]=r.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*i/t.width-(t.left+i),f=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:m=b=>Math.sqrt(b)*120,easing:d=Bs}=s;return{delay:c,duration:Ae(m)?m(Math.sqrt(o*o+f*f)):m,easing:d,css:(b,v)=>{const _=v*o,h=v*f,w=b+v*e.width/t.width,y=b+v*e.height/t.height;return`transform: ${n} translate(${_}px, ${h}px) scale(${w}, ${y});`}}}function Ye(l,{delay:e=0,duration:t=400,easing:s=Js}={}){const r=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:s,css:n=>`opacity: ${n*r}`}}function zt(l,{delay:e=0,duration:t=400,easing:s=Bs,x:r=0,y:n=0,opacity:i=0}={}){const a=getComputedStyle(l),o=+a.opacity,f=a.transform==="none"?"":a.transform,c=o*(1-i),[m,d]=it(r),[b,v]=it(n);return{delay:e,duration:t,easing:s,css:(_,h)=>`
			transform: ${f} translate(${(1-_)*m}${d}, ${(1-_)*b}${v});
			opacity: ${o-c*h}`}}function El(l){let e,t,s,r,n,i,a;return{c(){e=p("button"),t=p("i"),u(t,"class",s="fa align-middle "+l[3]),u(e,"class","btn px-2"),u(e,"role","checkbox"),u(e,"aria-checked",r=!!l[2].selectedMessageIds.has(l[1].id)),u(e,"title",n=l[2].strings.select)},m(o,f){S(o,e,f),g(e,t),i||(a=J(e,"click",l[4]),i=!0)},p(o,[f]){f&8&&s!==(s="fa align-middle "+o[3])&&u(t,"class",s),f&6&&r!==(r=!!o[2].selectedMessageIds.has(o[1].id))&&u(e,"aria-checked",r),f&4&&n!==(n=o[2].strings.select)&&u(e,"title",n)},i:N,o:N,d(o){o&&q(e),i=!1,a()}}}function Ul(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,c=>t(2,r=c)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;const f=()=>a.toggleSelected(o.id);return l.$$set=c=>{"store"in c&&i(t(0,a=c.store)),"message"in c&&t(1,o=c.message)},l.$$.update=()=>{l.$$.dirty&6&&t(3,s=r.selectedMessageIds.has(o.id)?"fa-check-square-o":"fa-square-o")},[a,o,r,s,f]}class Rs extends ne{constructor(e){super(),re(this,e,Ul,El,le,{store:0,message:1})}}function Ql(l){let e,t,s,r,n,i,a,o;return{c(){e=p("button"),t=p("i"),u(t,"class",s="fa "+l[2]),u(e,"class","btn px-2"),u(e,"role","checkbox"),u(e,"aria-checked",r=l[1].starred),e.disabled=n=l[1].deleted,u(e,"title",i=l[1].deleted?l[3].strings[l[1].starred?"starred":"unstarred"]:l[3].strings[l[1].starred?"markasunstarred":"markasstarred"])},m(f,c){S(f,e,c),g(e,t),a||(o=J(e,"click",l[4]),a=!0)},p(f,[c]){c&4&&s!==(s="fa "+f[2])&&u(t,"class",s),c&2&&r!==(r=f[1].starred)&&u(e,"aria-checked",r),c&2&&n!==(n=f[1].deleted)&&(e.disabled=n),c&10&&i!==(i=f[1].deleted?f[3].strings[f[1].starred?"starred":"unstarred"]:f[3].strings[f[1].starred?"markasunstarred":"markasstarred"])&&u(e,"title",i)},i:N,o:N,d(f){f&&q(e),a=!1,o()}}}function Fl(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,c=>t(3,r=c)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;const f=()=>a.setStarred([o.id],!o.starred);return l.$$set=c=>{"store"in c&&i(t(0,a=c.store)),"message"in c&&t(1,o=c.message)},l.$$.update=()=>{l.$$.dirty&2&&t(2,s=o.starred?"fa-star text-warning":"fa-star-o")},[a,o,s,r,f]}class Ps extends ne{constructor(e){super(),re(this,e,Fl,Ql,le,{store:0,message:1})}}function Gl(l){let e,t=l[2].join(", ")+"",s,r,n,i;return{c(){e=p("div"),s=R(t),C(e,"local-mail-list-messaege-users-md",l[1].viewSize>=fe.MD)},m(a,o){S(a,e,o),g(e,s),n||(i=Fe(r=Ze.call(null,e,l[2].join(`
`))),n=!0)},p(a,[o]){o&4&&t!==(t=a[2].join(", ")+"")&&P(s,t),r&&Ae(r.update)&&o&4&&r.update.call(null,a[2].join(`
`)),o&2&&C(e,"local-mail-list-messaege-users-md",a[1].viewSize>=fe.MD)},i:N,o:N,d(a){a&&q(e),n=!1,i()}}}function Hl(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,f=>t(1,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;return l.$$set=f=>{"store"in f&&i(t(0,a=f.store)),"message"in f&&t(3,o=f.message)},l.$$.update=()=>{l.$$.dirty&10&&t(2,s=r.params.type=="sent"||r.params.type=="drafts"?o.recipients.length>0?o.recipients.map(f=>f.fullname):[r.strings.norecipient]:[o.sender.fullname])},[a,r,s,o]}class Es extends ne{constructor(e){super(),re(this,e,Hl,Gl,le,{store:0,message:3})}}function jt(l){let e,t=l[2].strings.draft+"",s;return{c(){e=p("span"),s=R(t),u(e,"class","mr-2 text-danger")},m(r,n){S(r,e,n),g(e,s)},p(r,n){n&4&&t!==(t=r[2].strings.draft+"")&&P(s,t)},d(r){r&&q(e)}}}function Ol(l){let e,t,s=(l[1].subject||l[2].strings.nosubject)+"",r,n,i,a,o=l[1].draft&&jt(l);return{c(){e=p("div"),o&&o.c(),t=I(),r=R(s)},m(f,c){S(f,e,c),o&&o.m(e,null),g(e,t),g(e,r),i||(a=Fe(n=Ze.call(null,e,l[1].subject||l[2].strings.nosubject)),i=!0)},p(f,[c]){f[1].draft?o?o.p(f,c):(o=jt(f),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&6&&s!==(s=(f[1].subject||f[2].strings.nosubject)+"")&&P(r,s),n&&Ae(n.update)&&c&6&&n.update.call(null,f[1].subject||f[2].strings.nosubject)},i:N,o:N,d(f){f&&q(e),o&&o.d(),i=!1,a()}}}function Vl(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class Us extends ne{constructor(e){super(),re(this,e,Vl,Ol,le,{store:0,message:1})}}function At(l){let e,t,s,r,n;return{c(){e=p("span"),t=R(l[2]),u(e,"class","local-mail-course-badge badge px-2 mr-2 mb-2 svelte-zl9zhm"),he(e,"min-width","3rem"),he(e,"max-width","calc("+l[1]+"ch + 1rem)")},m(i,a){S(i,e,a),g(e,t),r||(n=Fe(s=Ze.call(null,e,l[2])),r=!0)},p(i,a){a&4&&P(t,i[2]),a&2&&he(e,"max-width","calc("+i[1]+"ch + 1rem)"),s&&Ae(s.update)&&a&4&&s.update.call(null,i[2])},d(i){i&&q(e),r=!1,n()}}}function Kl(l){let e,t=l[0].coursebadges!="none"&&At(l);return{c(){t&&t.c(),e=ve()},m(s,r){t&&t.m(s,r),S(s,e,r)},p(s,[r]){s[0].coursebadges!="none"?t?t.p(s,r):(t=At(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:N,o:N,d(s){t&&t.d(s),s&&q(e)}}}function Wl(l,e,t){let s,r,{course:n}=e,{settings:i}=e;return l.$$set=a=>{"course"in a&&t(3,n=a.course),"settings"in a&&t(0,i=a.settings)},l.$$.update=()=>{l.$$.dirty&9&&t(2,s=i.coursebadges=="shortname"?n.shortname:n.fullname),l.$$.dirty&1&&t(1,r=i.coursebadgeslength||20+1)},[i,r,s,n]}class nt extends ne{constructor(e){super(),re(this,e,Wl,Kl,le,{course:3,settings:0})}}function Xl(l){let e,t=l[0].name+"",s,r;return{c(){e=p("span"),s=R(t),u(e,"class","local-mail-label-badge badge flex-shrink-0 px-2 mr-2 mb-2 svelte-1xmrn49"),u(e,"style",r=`color: var(--local-mail-color-${l[1]}-fg, var(--local-mail-color-gray-fg));background-color: var(--local-mail-color-${l[1]}-bg, var(--local-mail-color-gray-bg))`)},m(n,i){S(n,e,i),g(e,s)},p(n,[i]){i&1&&t!==(t=n[0].name+"")&&P(s,t),i&2&&r!==(r=`color: var(--local-mail-color-${n[1]}-fg, var(--local-mail-color-gray-fg));background-color: var(--local-mail-color-${n[1]}-bg, var(--local-mail-color-gray-bg))`)&&u(e,"style",r)},i:N,o:N,d(n){n&&q(e)}}}function Yl(l,e,t){let s,{label:r}=e;return l.$$set=n=>{"label"in n&&t(0,r=n.label)},l.$$.update=()=>{l.$$.dirty&1&&t(1,s=Ve.includes(r.color)?r.color:"gray")},[r,s]}class Qs extends ne{constructor(e){super(),re(this,e,Yl,Xl,le,{label:0})}}function Lt(l,e,t){const s=l.slice();return s[3]=e[t],s}function Tt(l){let e,t,s=(l[2].params.type!="course"||l[2].params.courseid!=l[1].course.id)&&Dt(l);return{c(){s&&s.c(),e=ve()},m(r,n){s&&s.m(r,n),S(r,e,n),t=!0},p(r,n){r[2].params.type!="course"||r[2].params.courseid!=r[1].course.id?s?(s.p(r,n),n&6&&z(s,1)):(s=Dt(r),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(ce(),L(s,1,1,()=>{s=null}),de())},i(r){t||(z(s),t=!0)},o(r){L(s),t=!1},d(r){s&&s.d(r),r&&q(e)}}}function Dt(l){let e,t;return e=new nt({props:{course:l[1].course,settings:l[2].settings}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.course=s[1].course),r&4&&(n.settings=s[2].settings),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Nt(l){let e,t;return e=new Qs({props:{label:l[3]}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.label=s[3]),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Bt(l,e){let t,s,r,n=(e[2].params.type!="label"||e[2].params.labelid!=e[3].id)&&Nt(e);return{key:l,first:null,c(){t=ve(),n&&n.c(),s=ve(),this.first=t},m(i,a){S(i,t,a),n&&n.m(i,a),S(i,s,a),r=!0},p(i,a){e=i,e[2].params.type!="label"||e[2].params.labelid!=e[3].id?n?(n.p(e,a),a&6&&z(n,1)):(n=Nt(e),n.c(),z(n,1),n.m(s.parentNode,s)):n&&(ce(),L(n,1,1,()=>{n=null}),de())},i(i){r||(z(n),r=!0)},o(i){L(n),r=!1},d(i){i&&q(t),n&&n.d(i),i&&q(s)}}}function Ct(l){let e,t,s=(l[2].params.type!="course"||l[2].params.courseid!=l[1].course.id)&&Rt(l);return{c(){s&&s.c(),e=ve()},m(r,n){s&&s.m(r,n),S(r,e,n),t=!0},p(r,n){r[2].params.type!="course"||r[2].params.courseid!=r[1].course.id?s?(s.p(r,n),n&6&&z(s,1)):(s=Rt(r),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(ce(),L(s,1,1,()=>{s=null}),de())},i(r){t||(z(s),t=!0)},o(r){L(s),t=!1},d(r){s&&s.d(r),r&&q(e)}}}function Rt(l){let e,t;return e=new nt({props:{course:l[1].course,settings:l[2].settings}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.course=s[1].course),r&4&&(n.settings=s[2].settings),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Jl(l){let e,t=[],s=new Map,r,n,i,a=l[2].viewSize<fe.MD&&Tt(l),o=l[1].labels;const f=m=>m[3].id;for(let m=0;m<o.length;m+=1){let d=Lt(l,o,m),b=f(d);s.set(b,t[m]=Bt(b,d))}let c=l[2].viewSize>=fe.MD&&Ct(l);return{c(){a&&a.c(),e=I();for(let m=0;m<t.length;m+=1)t[m].c();r=I(),c&&c.c(),n=ve()},m(m,d){a&&a.m(m,d),S(m,e,d);for(let b=0;b<t.length;b+=1)t[b]&&t[b].m(m,d);S(m,r,d),c&&c.m(m,d),S(m,n,d),i=!0},p(m,[d]){m[2].viewSize<fe.MD?a?(a.p(m,d),d&4&&z(a,1)):(a=Tt(m),a.c(),z(a,1),a.m(e.parentNode,e)):a&&(ce(),L(a,1,1,()=>{a=null}),de()),d&6&&(o=m[1].labels,ce(),t=Le(t,d,f,1,m,o,s,r.parentNode,xe,Bt,r,Lt),de()),m[2].viewSize>=fe.MD?c?(c.p(m,d),d&4&&z(c,1)):(c=Ct(m),c.c(),z(c,1),c.m(n.parentNode,n)):c&&(ce(),L(c,1,1,()=>{c=null}),de())},i(m){if(!i){z(a);for(let d=0;d<o.length;d+=1)z(t[d]);z(c),i=!0}},o(m){L(a);for(let d=0;d<t.length;d+=1)L(t[d]);L(c),i=!1},d(m){a&&a.d(m),m&&q(e);for(let d=0;d<t.length;d+=1)t[d].d(m);m&&q(r),c&&c.d(m),m&&q(n)}}}function Zl(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class Fs extends ne{constructor(e){super(),re(this,e,Zl,Jl,le,{store:0,message:1})}}function Pt(l){let e,t,s,r,n;return{c(){e=p("span"),t=p("i"),u(t,"class",s="fa fa-fw "+(l[1].numattachments>0?"fa-paperclip":"")),u(t,"aria-hidden",!0),u(e,"class","-shrink-0 mr-2"),u(e,"title",r=l[1].numattachments>0?qe(l[2].strings.attachnumber,l[1].numattachments):""),u(e,"aria-hidden",n=l[1].numattachments==0)},m(i,a){S(i,e,a),g(e,t)},p(i,a){a&2&&s!==(s="fa fa-fw "+(i[1].numattachments>0?"fa-paperclip":""))&&u(t,"class",s),a&6&&r!==(r=i[1].numattachments>0?qe(i[2].strings.attachnumber,i[1].numattachments):"")&&u(e,"title",r),a&2&&n!==(n=i[1].numattachments==0)&&u(e,"aria-hidden",n)},d(i){i&&q(e)}}}function xl(l){let e,t=(l[1].numattachments>0||l[2].viewSize>=fe.MD)&&Pt(l);return{c(){t&&t.c(),e=ve()},m(s,r){t&&t.m(s,r),S(s,e,r)},p(s,[r]){s[1].numattachments>0||s[2].viewSize>=fe.MD?t?t.p(s,r):(t=Pt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:N,o:N,d(s){t&&t.d(s),s&&q(e)}}}function en(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class Gs extends ne{constructor(e){super(),re(this,e,en,xl,le,{store:0,message:1})}}function tn(l){let e,t=l[0].shorttime+"",s,r;return{c(){e=p("span"),s=R(t),u(e,"class","local-mail-list-message-time d-shrink-0 text-nowrap text-right svelte-phmq8k"),u(e,"title",r=l[0].fulltime),C(e,"local-mail-list-message-time-md",l[2].viewSize>=fe.MD)},m(n,i){S(n,e,i),g(e,s)},p(n,[i]){i&1&&t!==(t=n[0].shorttime+"")&&P(s,t),i&1&&r!==(r=n[0].fulltime)&&u(e,"title",r),i&4&&C(e,"local-mail-list-message-time-md",n[2].viewSize>=fe.MD)},i:N,o:N,d(n){n&&q(e)}}}function sn(l,e,t){let s,r=N,n=()=>(r(),r=oe(a,o=>t(2,s=o)),a);l.$$.on_destroy.push(()=>r());let{message:i}=e,{store:a}=e;return n(),l.$$set=o=>{"message"in o&&t(0,i=o.message),"store"in o&&n(t(1,a=o.store))},[i,a,s]}class Hs extends ne{constructor(e){super(),re(this,e,sn,tn,le,{message:0,store:1})}}function Et(l){let e,t,s=l[1].strings.nomessagestoview+"",r,n,i,a=l[1].list.totalcount>0&&Ut(l);return{c(){e=p("div"),t=p("div"),r=R(s),n=I(),a&&a.c(),u(e,"class","alert alert-info")},m(o,f){S(o,e,f),g(e,t),g(t,r),g(e,n),a&&a.m(e,null)},p(o,f){f&2&&s!==(s=o[1].strings.nomessagestoview+"")&&P(r,s),o[1].list.totalcount>0?a?a.p(o,f):(a=Ut(o),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(o){o&&(i||Ke(()=>{i=et(e,Ye,{delay:400}),i.start()}))},o:N,d(o){o&&q(e),a&&a.d()}}}function Ut(l){let e,t=l[1].strings.showrecentmessages+"",s,r,n,i;return{c(){e=p("a"),s=R(t),u(e,"class","btn btn-info text-white mt-3"),u(e,"href",r=We(l[2]))},m(a,o){S(a,e,o),g(e,s),n||(i=J(e,"click",Re(l[3])),n=!0)},p(a,o){o&2&&t!==(t=a[1].strings.showrecentmessages+"")&&P(s,t),o&4&&r!==(r=We(a[2]))&&u(e,"href",r)},d(a){a&&q(e),n=!1,i()}}}function ln(l){let e,t=!l[1].list.messages.length&&!l[1].list.nextid&&Et(l);return{c(){t&&t.c(),e=ve()},m(s,r){t&&t.m(s,r),S(s,e,r)},p(s,[r]){!s[1].list.messages.length&&!s[1].list.nextid?t?(t.p(s,r),r&2&&z(t,1)):(t=Et(s),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i(s){z(t)},o:N,d(s){t&&t.d(s),s&&q(e)}}}function nn(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,f=>t(1,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();const o=()=>a.navigate(s);return l.$$set=f=>{"store"in f&&i(t(0,a=f.store))},l.$$.update=()=>{l.$$.dirty&2&&t(2,s={type:r.params.type,courseid:r.params.courseid,labelid:r.params.labelid})},[a,r,s,o]}class rn extends ne{constructor(e){super(),re(this,e,nn,ln,le,{store:0})}}function Qt(l,e,t){const s=l.slice();return s[3]=e[t],s}function an(l){let e,t,s,r,n,i,a,o,f,c,m,d,b,v,_,h,w,y,A,k,$;return t=new Rs({props:{store:l[0],message:l[3]}}),i=new Es({props:{store:l[0],message:l[3]}}),o=new Gs({props:{store:l[0],message:l[3]}}),m=new Hs({props:{store:l[0],message:l[3]}}),_=new Us({props:{store:l[0],message:l[3]}}),w=new Ps({props:{store:l[0],message:l[3]}}),k=new Fs({props:{store:l[0],message:l[3]}}),{c(){e=p("div"),Q(t.$$.fragment),s=I(),r=p("div"),n=p("div"),Q(i.$$.fragment),a=I(),Q(o.$$.fragment),f=I(),c=p("div"),Q(m.$$.fragment),d=I(),b=p("div"),v=p("div"),Q(_.$$.fragment),h=I(),Q(w.$$.fragment),y=I(),A=p("div"),Q(k.$$.fragment),u(c,"class","ml-auto mr-2"),u(n,"class","d-flex mt-2"),u(v,"class","d-flex w-100 d-shrink-1 my-2 mr-2"),he(v,"min-width","0"),u(b,"class","d-flex"),u(A,"class","d-flex flex-wrap ml-n2 mr-2"),u(r,"class","flex-shrink-1 w-100 ml-1"),he(r,"min-width","0"),u(e,"class","d-flex align-items-start pt-1 pb-2 pl-1 pr-2")},m(M,j){S(M,e,j),F(t,e,null),g(e,s),g(e,r),g(r,n),F(i,n,null),g(n,a),F(o,n,null),g(n,f),g(n,c),F(m,c,null),g(r,d),g(r,b),g(b,v),F(_,v,null),g(b,h),F(w,b,null),g(r,y),g(r,A),F(k,A,null),$=!0},p(M,j){const D={};j&1&&(D.store=M[0]),j&2&&(D.message=M[3]),t.$set(D);const O={};j&1&&(O.store=M[0]),j&2&&(O.message=M[3]),i.$set(O);const x={};j&1&&(x.store=M[0]),j&2&&(x.message=M[3]),o.$set(x);const V={};j&1&&(V.store=M[0]),j&2&&(V.message=M[3]),m.$set(V);const K={};j&1&&(K.store=M[0]),j&2&&(K.message=M[3]),_.$set(K);const Y={};j&1&&(Y.store=M[0]),j&2&&(Y.message=M[3]),w.$set(Y);const H={};j&1&&(H.store=M[0]),j&2&&(H.message=M[3]),k.$set(H)},i(M){$||(z(t.$$.fragment,M),z(i.$$.fragment,M),z(o.$$.fragment,M),z(m.$$.fragment,M),z(_.$$.fragment,M),z(w.$$.fragment,M),z(k.$$.fragment,M),$=!0)},o(M){L(t.$$.fragment,M),L(i.$$.fragment,M),L(o.$$.fragment,M),L(m.$$.fragment,M),L(_.$$.fragment,M),L(w.$$.fragment,M),L(k.$$.fragment,M),$=!1},d(M){M&&q(e),G(t),G(i),G(o),G(m),G(_),G(w),G(k)}}}function on(l){let e,t,s,r,n,i,a,o,f,c,m,d,b,v,_,h,w,y,A;return t=new Rs({props:{store:l[0],message:l[3]}}),r=new Ps({props:{store:l[0],message:l[3]}}),o=new Es({props:{store:l[0],message:l[3]}}),m=new Us({props:{store:l[0],message:l[3]}}),v=new Fs({props:{store:l[0],message:l[3]}}),h=new Gs({props:{store:l[0],message:l[3]}}),y=new Hs({props:{store:l[0],message:l[3]}}),{c(){e=p("div"),Q(t.$$.fragment),s=I(),Q(r.$$.fragment),n=I(),i=p("div"),a=p("div"),Q(o.$$.fragment),f=I(),c=p("div"),Q(m.$$.fragment),d=I(),b=p("div"),Q(v.$$.fragment),_=I(),Q(h.$$.fragment),w=I(),Q(y.$$.fragment),u(a,"class","flex-grow-1 mx-2"),he(a,"width","25%"),he(a,"min-width","0"),u(b,"class","d-flex text-truncate flex-shrink-0 justify-content-end mb-n2 ml-auto"),he(b,"max-width","80%"),u(c,"class","flex-grow-1 d-flex my-2 mx-2"),he(c,"width","75%"),he(c,"min-width","0"),u(i,"class","d-flex w-100 flex-grow-1 align-items-center"),he(i,"min-width","0"),u(e,"class","d-flex align-items-center pl-1 pr-3")},m(k,$){S(k,e,$),F(t,e,null),g(e,s),F(r,e,null),g(e,n),g(e,i),g(i,a),F(o,a,null),g(i,f),g(i,c),F(m,c,null),g(c,d),g(c,b),F(v,b,null),g(e,_),F(h,e,null),g(e,w),F(y,e,null),A=!0},p(k,$){const M={};$&1&&(M.store=k[0]),$&2&&(M.message=k[3]),t.$set(M);const j={};$&1&&(j.store=k[0]),$&2&&(j.message=k[3]),r.$set(j);const D={};$&1&&(D.store=k[0]),$&2&&(D.message=k[3]),o.$set(D);const O={};$&1&&(O.store=k[0]),$&2&&(O.message=k[3]),m.$set(O);const x={};$&1&&(x.store=k[0]),$&2&&(x.message=k[3]),v.$set(x);const V={};$&1&&(V.store=k[0]),$&2&&(V.message=k[3]),h.$set(V);const K={};$&1&&(K.store=k[0]),$&2&&(K.message=k[3]),y.$set(K)},i(k){A||(z(t.$$.fragment,k),z(r.$$.fragment,k),z(o.$$.fragment,k),z(m.$$.fragment,k),z(v.$$.fragment,k),z(h.$$.fragment,k),z(y.$$.fragment,k),A=!0)},o(k){L(t.$$.fragment,k),L(r.$$.fragment,k),L(o.$$.fragment,k),L(m.$$.fragment,k),L(v.$$.fragment,k),L(h.$$.fragment,k),L(y.$$.fragment,k),A=!1},d(k){k&&q(e),G(t),G(r),G(o),G(m),G(v),G(h),G(y)}}}function Ft(l,e){let t,s,r,n,i,a,o,f=N,c,m,d;const b=[on,an],v=[];function _(h,w){return h[1].viewSize>=fe.MD?0:1}return s=_(e),r=v[s]=b[s](e),{key:l,first:null,c(){t=p("a"),r.c(),u(t,"class","local-mail-list-message list-group-item list-group-item-action p-0 svelte-unh3d4"),u(t,"href",n=e[3].draft?at(e[3].id):We({...e[1].params,messageid:e[3].id})),C(t,"list-group-item-primary",e[1].selectedMessageIds.has(e[3].id)),C(t,"list-group-item-secondary",!e[3].unread&&!e[1].selectedMessageIds.has(e[3].id)),C(t,"font-weight-bold",e[3].unread),this.first=t},m(h,w){S(h,t,w),v[s].m(t,null),c=!0,m||(d=J(t,"click",function(){Ae(e[2](e[3]))&&e[2](e[3]).apply(this,arguments)}),m=!0)},p(h,w){e=h;let y=s;s=_(e),s===y?v[s].p(e,w):(ce(),L(v[y],1,1,()=>{v[y]=null}),de(),r=v[s],r?r.p(e,w):(r=v[s]=b[s](e),r.c()),z(r,1),r.m(t,null)),(!c||w&2&&n!==(n=e[3].draft?at(e[3].id):We({...e[1].params,messageid:e[3].id})))&&u(t,"href",n),(!c||w&2)&&C(t,"list-group-item-primary",e[1].selectedMessageIds.has(e[3].id)),(!c||w&2)&&C(t,"list-group-item-secondary",!e[3].unread&&!e[1].selectedMessageIds.has(e[3].id)),(!c||w&2)&&C(t,"font-weight-bold",e[3].unread)},r(){o=t.getBoundingClientRect()},f(){ys(t),f(),Ms(t,o)},a(){f(),f=Is(t,o,Cs,{delay:400,duration:400})},i(h){c||(z(r),h&&Ke(()=>{c&&(a&&a.end(1),i=et(t,Ye,{delay:400}),i.start())}),c=!0)},o(h){L(r),i&&i.invalidate(),h&&(a=Ss(t,Ye,{duration:400})),c=!1},d(h){h&&q(t),v[s].d(),h&&a&&a.end(),m=!1,d()}}}function Gt(l){let e,t=[],s=new Map,r,n,i,a=l[1].list.messages;const o=f=>f[3].id;for(let f=0;f<a.length;f+=1){let c=Qt(l,a,f),m=o(c);s.set(m,t[f]=Ft(m,c))}return n=new rn({props:{store:l[0]}}),{c(){e=p("div");for(let f=0;f<t.length;f+=1)t[f].c();r=I(),Q(n.$$.fragment),u(e,"class","list-group")},m(f,c){S(f,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);g(e,r),F(n,e,null),i=!0},p(f,c){if(c&7){a=f[1].list.messages,ce();for(let d=0;d<t.length;d+=1)t[d].r();t=Le(t,c,o,1,f,a,s,e,$s,Ft,r,Qt);for(let d=0;d<t.length;d+=1)t[d].a();de()}const m={};c&1&&(m.store=f[0]),n.$set(m)},i(f){if(!i){for(let c=0;c<a.length;c+=1)z(t[c]);z(n.$$.fragment,f),i=!0}},o(f){for(let c=0;c<t.length;c+=1)L(t[c]);L(n.$$.fragment,f),i=!1},d(f){f&&q(e);for(let c=0;c<t.length;c+=1)t[c].d();G(n)}}}function fn(l){let e=l[1].navigationId,t,s,r=Gt(l);return{c(){r.c(),t=ve()},m(n,i){r.m(n,i),S(n,t,i),s=!0},p(n,[i]){i&2&&le(e,e=n[1].navigationId)?(ce(),L(r,1,1,N),de(),r=Gt(n),r.c(),z(r,1),r.m(t.parentNode,t)):r.p(n,i)},i(n){s||(z(r),s=!0)},o(n){L(r),s=!1},d(n){n&&q(t),r.d(n)}}}function un(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(1,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=o=>f=>{f.target.matches("button, button > *")?f.preventDefault():o.draft||(f.preventDefault(),i.navigate({...s.params,messageid:o.id}))};return l.$$set=o=>{"store"in o&&n(t(0,i=o.store))},[i,s,a]}class cn extends ne{constructor(e){super(),re(this,e,un,fn,le,{store:0})}}function Ht(l){let e,t,s,r,n,i,a,o,f,c=l[4].strings.reply+"",m,d,b,v,_,h,w=l[4].strings.replyall+"",y,A,k,$,M,j,D=l[4].strings.forward+"",O,x;return{c(){e=p("div"),t=p("button"),s=p("i"),n=I(),i=p("div"),a=p("a"),o=p("i"),f=I(),m=R(c),b=I(),v=p("a"),_=p("i"),h=I(),y=R(w),k=I(),$=p("a"),M=p("i"),j=I(),O=R(D),u(s,"class","fa fa-fw fa-ellipsis-v align-middle"),u(t,"type","button"),u(t,"class","btn"),u(t,"data-toggle","dropdown"),u(t,"aria-expanded","false"),u(t,"title",r=l[4].strings.moreactions),u(o,"class","fa fa-fw fa-reply"),u(o,"aria-hidden","true"),u(a,"type","button"),u(a,"class","dropdown-item"),u(a,"href",d=Pe(l[1].id)+"}"),u(_,"class","fa fa-fw fa-reply-all"),u(_,"aria-hidden","true"),u(v,"type","button"),u(v,"class","dropdown-item"),u(v,"href",A=Ee(l[1].id)+"}"),C(v,"disabled",!l[2]),u(M,"class","fa fa-fw fa-share"),u(M,"aria-hidden","true"),u($,"type","button"),u($,"class","dropdown-item"),u($,"href",x=Ue(l[1].id)+"}"),u(i,"class","dropdown-menu dropdown-menu-right"),u(e,"class","dropdown")},m(V,K){S(V,e,K),g(e,t),g(t,s),g(e,n),g(e,i),g(i,a),g(a,o),g(a,f),g(a,m),g(i,b),g(i,v),g(v,_),g(v,h),g(v,y),g(i,k),g(i,$),g($,M),g($,j),g($,O)},p(V,K){K&16&&r!==(r=V[4].strings.moreactions)&&u(t,"title",r),K&16&&c!==(c=V[4].strings.reply+"")&&P(m,c),K&2&&d!==(d=Pe(V[1].id)+"}")&&u(a,"href",d),K&16&&w!==(w=V[4].strings.replyall+"")&&P(y,w),K&2&&A!==(A=Ee(V[1].id)+"}")&&u(v,"href",A),K&4&&C(v,"disabled",!V[2]),K&16&&D!==(D=V[4].strings.forward+"")&&P(O,D),K&2&&x!==(x=Ue(V[1].id)+"}")&&u($,"href",x)},d(V){V&&q(e)}}}function Ot(l){let e,t,s,r,n,i,a,o,f,c,m,d,b,v;return{c(){e=p("a"),t=p("i"),n=I(),i=p("a"),a=p("i"),c=I(),m=p("a"),d=p("i"),u(t,"class","fa fa-fw fa-reply"),u(t,"aria-hidden","true"),u(e,"href",s=Pe(l[1].id)),u(e,"title",r=l[4].strings.reply),u(e,"class","btn py-2 border-0"),u(a,"class","fa fa-fw fa-reply-all"),u(a,"aria-hidden","true"),u(i,"href",o=Ee(l[1].id)),u(i,"title",f=l[4].strings.replyall),u(i,"class","btn py-2 border-0"),C(i,"disabled",!l[2]),u(d,"class","fa fa-fw fa-share"),u(d,"aria-hidden","true"),u(m,"href",b=Ue(l[1].id)),u(m,"title",v=l[4].strings.forward),u(m,"class","btn py-2 border-0")},m(_,h){S(_,e,h),g(e,t),S(_,n,h),S(_,i,h),g(i,a),S(_,c,h),S(_,m,h),g(m,d)},p(_,h){h&2&&s!==(s=Pe(_[1].id))&&u(e,"href",s),h&16&&r!==(r=_[4].strings.reply)&&u(e,"title",r),h&2&&o!==(o=Ee(_[1].id))&&u(i,"href",o),h&16&&f!==(f=_[4].strings.replyall)&&u(i,"title",f),h&4&&C(i,"disabled",!_[2]),h&2&&b!==(b=Ue(_[1].id))&&u(m,"href",b),h&16&&v!==(v=_[4].strings.forward)&&u(m,"title",v)},d(_){_&&q(e),_&&q(n),_&&q(i),_&&q(c),_&&q(m)}}}function dn(l){let e,t,s,r,n,i,a,o,f,c,m,d=l[4].viewSize<fe.SM&&Ht(l),b=l[4].viewSize>=fe.SM&&Ot(l);return{c(){e=p("button"),t=p("i"),a=I(),d&&d.c(),o=I(),b&&b.c(),f=ve(),u(t,"class",s="fa "+l[3]),u(e,"class","btn py-2 border-0"),u(e,"role","checkbox"),u(e,"aria-checked",r=l[1].starred),e.disabled=n=l[1].deleted,u(e,"title",i=l[1].starred?l[4].strings.markasunstarred:l[4].strings.markasstarred)},m(v,_){S(v,e,_),g(e,t),S(v,a,_),d&&d.m(v,_),S(v,o,_),b&&b.m(v,_),S(v,f,_),c||(m=J(e,"click",l[5]),c=!0)},p(v,[_]){_&8&&s!==(s="fa "+v[3])&&u(t,"class",s),_&2&&r!==(r=v[1].starred)&&u(e,"aria-checked",r),_&2&&n!==(n=v[1].deleted)&&(e.disabled=n),_&18&&i!==(i=v[1].starred?v[4].strings.markasunstarred:v[4].strings.markasstarred)&&u(e,"title",i),v[4].viewSize<fe.SM?d?d.p(v,_):(d=Ht(v),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),v[4].viewSize>=fe.SM?b?b.p(v,_):(b=Ot(v),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},i:N,o:N,d(v){v&&q(e),v&&q(a),d&&d.d(v),v&&q(o),b&&b.d(v),v&&q(f),c=!1,m()}}}function mn(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,m=>t(4,r=m)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e,{canReplyAll:f}=e;const c=()=>a.setStarred([o.id],!o.starred);return l.$$set=m=>{"store"in m&&i(t(0,a=m.store)),"message"in m&&t(1,o=m.message),"canReplyAll"in m&&t(2,f=m.canReplyAll)},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=o.starred?"fa-star text-warning":"fa-star-o")},[a,o,f,s,r,c]}class gn extends ne{constructor(e){super(),re(this,e,mn,dn,le,{store:0,message:1,canReplyAll:2})}}function Vt(l,e,t){const s=l.slice();return s[1]=e[t],s}function Kt(l){let e,t,s,r,n,i,a=(l[1].filepath+l[1].filename).replace(/^\//,"")+"",o,f,c,m,d=ut(l[1].filesize)+"",b,v;return{c(){e=p("div"),t=p("img"),n=I(),i=p("a"),o=R(a),c=I(),m=p("span"),b=R(d),v=I(),u(t,"aria-hidden","true"),u(t,"alt",s=l[1].filename),Qe(t.src,r=l[1].iconurl)||u(t,"src",r),u(t,"width","24"),u(t,"height","24"),u(t,"class","mr-2"),u(i,"href",f=l[1].fileurl),u(i,"class","mr-2"),u(m,"class","text-muted"),u(e,"class","mr-5 mb-3")},m(_,h){S(_,e,h),g(e,t),g(e,n),g(e,i),g(i,o),g(e,c),g(e,m),g(m,b),g(e,v)},p(_,h){h&1&&s!==(s=_[1].filename)&&u(t,"alt",s),h&1&&!Qe(t.src,r=_[1].iconurl)&&u(t,"src",r),h&1&&a!==(a=(_[1].filepath+_[1].filename).replace(/^\//,"")+"")&&P(o,a),h&1&&f!==(f=_[1].fileurl)&&u(i,"href",f),h&1&&d!==(d=ut(_[1].filesize)+"")&&P(b,d)},d(_){_&&q(e)}}}function _n(l){let e,t=l[0].attachments,s=[];for(let r=0;r<t.length;r+=1)s[r]=Kt(Vt(l,t,r));return{c(){e=p("div");for(let r=0;r<s.length;r+=1)s[r].c();u(e,"class","d-sm-flex flex-sm-wrap mr-n5 mt-3 mb-n3")},m(r,n){S(r,e,n);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(r,[n]){if(n&1){t=r[0].attachments;let i;for(i=0;i<t.length;i+=1){const a=Vt(r,t,i);s[i]?s[i].p(a,n):(s[i]=Kt(a),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},i:N,o:N,d(r){r&&q(e),tt(s,r)}}}function bn(l,e,t){let{message:s}=e;return l.$$set=r=>{"message"in r&&t(0,s=r.message)},[s]}class Os extends ne{constructor(e){super(),re(this,e,bn,_n,le,{message:0})}}function pn(l){let e,t,s,r=l[3].strings.reply+"",n,i,a,o,f,c,m=l[3].strings.replyall+"",d,b,v,_,h,w,y=l[3].strings.forward+"",A,k;return{c(){e=p("a"),t=p("i"),s=I(),n=R(r),a=I(),o=p("a"),f=p("i"),c=I(),d=R(m),v=I(),_=p("a"),h=p("i"),w=I(),A=R(y),u(t,"class","fa fa-fw fa-reply mr-2"),u(e,"href",i=Pe(l[1].id)),u(e,"class","btn btn-primary mr-3 mb-3"),u(f,"class","fa fa-fw fa-reply-all mr-2"),u(o,"href",b=Ee(l[1].id)),u(o,"class","btn mr-3 mb-3"),C(o,"disabled",!l[2]),C(o,"btn-primary",l[2]),C(o,"btn-secondary",!l[2]),u(h,"class","fa fa-fw fa-share mr-2"),u(_,"href",k=Ue(l[1].id)),u(_,"class","btn btn-primary mr-3 mb-3")},m($,M){S($,e,M),g(e,t),g(e,s),g(e,n),S($,a,M),S($,o,M),g(o,f),g(o,c),g(o,d),S($,v,M),S($,_,M),g(_,h),g(_,w),g(_,A)},p($,[M]){M&8&&r!==(r=$[3].strings.reply+"")&&P(n,r),M&2&&i!==(i=Pe($[1].id))&&u(e,"href",i),M&8&&m!==(m=$[3].strings.replyall+"")&&P(d,m),M&2&&b!==(b=Ee($[1].id))&&u(o,"href",b),M&4&&C(o,"disabled",!$[2]),M&4&&C(o,"btn-primary",$[2]),M&4&&C(o,"btn-secondary",!$[2]),M&8&&y!==(y=$[3].strings.forward+"")&&P(A,y),M&2&&k!==(k=Ue($[1].id))&&u(_,"href",k)},i:N,o:N,d($){$&&q(e),$&&q(a),$&&q(o),$&&q(v),$&&q(_)}}}function hn(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,f=>t(3,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e,{canReplyAll:o}=e;return l.$$set=f=>{"store"in f&&n(t(0,i=f.store)),"message"in f&&t(1,a=f.message),"canReplyAll"in f&&t(2,o=f.canReplyAll)},[i,a,o,s]}class vn extends ne{constructor(e){super(),re(this,e,hn,pn,le,{store:0,message:1,canReplyAll:2})}}function Wt(l,e,t){const s=l.slice();return s[3]=e[t],s}function Xt(l,e){let t,s,r;return s=new Qs({props:{label:e[3]}}),{key:l,first:null,c(){t=ve(),Q(s.$$.fragment),this.first=t},m(n,i){S(n,t,i),F(s,n,i),r=!0},p(n,i){e=n;const a={};i&2&&(a.label=e[3]),s.$set(a)},i(n){r||(z(s.$$.fragment,n),r=!0)},o(n){L(s.$$.fragment,n),r=!1},d(n){n&&q(t),G(s,n)}}}function kn(l){let e,t,s=[],r=new Map,n,i;e=new nt({props:{course:l[1].course,settings:l[2].settings}});let a=l[1].labels;const o=f=>f[3].id;for(let f=0;f<a.length;f+=1){let c=Wt(l,a,f),m=o(c);r.set(m,s[f]=Xt(m,c))}return{c(){Q(e.$$.fragment),t=I();for(let f=0;f<s.length;f+=1)s[f].c();n=ve()},m(f,c){F(e,f,c),S(f,t,c);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(f,c);S(f,n,c),i=!0},p(f,[c]){const m={};c&2&&(m.course=f[1].course),c&4&&(m.settings=f[2].settings),e.$set(m),c&2&&(a=f[1].labels,ce(),s=Le(s,c,o,1,f,a,r,n.parentNode,xe,Xt,n,Wt),de())},i(f){if(!i){z(e.$$.fragment,f);for(let c=0;c<a.length;c+=1)z(s[c]);i=!0}},o(f){L(e.$$.fragment,f);for(let c=0;c<s.length;c+=1)L(s[c]);i=!1},d(f){G(e,f),f&&q(t);for(let c=0;c<s.length;c+=1)s[c].d(f);f&&q(n)}}}function wn(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class $n extends ne{constructor(e){super(),re(this,e,wn,kn,le,{store:0,message:1})}}function Yt(l){let e,t,s,r;return s=new Os({props:{message:l[0]}}),{c(){e=p("hr"),t=I(),Q(s.$$.fragment)},m(n,i){S(n,e,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.message=n[0]),s.$set(a)},i(n){r||(z(s.$$.fragment,n),r=!0)},o(n){L(s.$$.fragment,n),r=!1},d(n){n&&q(e),n&&q(t),G(s,n)}}}function yn(l){let e,t,s,r=l[0].subject+"",n,i,a,o,f,c,m,d,b,v,_,h=l[0].sender.fullname+"",w,y,A,k,$=l[0].fulltime+"",M,j,D,O,x,V=l[0].content+"",K,Y,H=l[0].attachments.length>0&&Yt(l);return{c(){e=p("div"),t=p("div"),s=p("h5"),n=R(r),i=I(),a=p("div"),o=p("div"),f=p("div"),c=p("img"),b=I(),v=p("div"),_=p("a"),w=R(h),A=I(),k=p("div"),M=R($),j=I(),D=p("hr"),O=I(),x=p("div"),K=I(),H&&H.c(),u(s,"class","h5 card-title mb-3"),u(c,"aria-hidden","true"),u(c,"alt",m=l[0].sender.fullname),Qe(c.src,d=l[0].sender.pictureurl)||u(c,"src",d),u(c,"width","35"),u(c,"height","35"),u(c,"class","rounded-circle"),u(f,"class","mr-3"),u(_,"href",y=l[0].sender.profileurl),u(v,"class","mt-1"),u(o,"class","d-flex mb-3 mb-sm-0"),u(k,"class","mt-1 ml-auto"),u(a,"class","d-sm-flex mb-n1"),u(x,"class","local-mail-message-reference-content svelte-nahnfm"),u(t,"class","card-body p-3 px-xl-4"),u(e,"class","card mb-4")},m(ee,te){S(ee,e,te),g(e,t),g(t,s),g(s,n),g(t,i),g(t,a),g(a,o),g(o,f),g(f,c),g(o,b),g(o,v),g(v,_),g(_,w),g(a,A),g(a,k),g(k,M),g(t,j),g(t,D),g(t,O),g(t,x),x.innerHTML=V,g(t,K),H&&H.m(t,null),Y=!0},p(ee,[te]){(!Y||te&1)&&r!==(r=ee[0].subject+"")&&P(n,r),(!Y||te&1&&m!==(m=ee[0].sender.fullname))&&u(c,"alt",m),(!Y||te&1&&!Qe(c.src,d=ee[0].sender.pictureurl))&&u(c,"src",d),(!Y||te&1)&&h!==(h=ee[0].sender.fullname+"")&&P(w,h),(!Y||te&1&&y!==(y=ee[0].sender.profileurl))&&u(_,"href",y),(!Y||te&1)&&$!==($=ee[0].fulltime+"")&&P(M,$),(!Y||te&1)&&V!==(V=ee[0].content+"")&&(x.innerHTML=V),ee[0].attachments.length>0?H?(H.p(ee,te),te&1&&z(H,1)):(H=Yt(ee),H.c(),z(H,1),H.m(t,null)):H&&(ce(),L(H,1,1,()=>{H=null}),de())},i(ee){Y||(z(H),Y=!0)},o(ee){L(H),Y=!1},d(ee){ee&&q(e),H&&H.d()}}}function Mn(l,e,t){let{reference:s}=e;return l.$$set=r=>{"reference"in r&&t(0,s=r.reference)},[s]}class In extends ne{constructor(e){super(),re(this,e,Mn,yn,le,{reference:0})}}function Jt(l,e,t){const s=l.slice();return s[4]=e[t],s}function Zt(l,e,t){const s=l.slice();return s[7]=e[t],s[9]=t,s}function xt(l){let e,t,s=l[3].strings[l[4]]+"",r,n,i,a=[],o=new Map,f,c=l[2](l[4]);const m=d=>d[7].id;for(let d=0;d<c.length;d+=1){let b=Zt(l,c,d),v=m(b);o.set(v,a[d]=ts(v,b))}return{c(){e=p("div"),t=p("span"),r=R(s),n=R(":"),i=I();for(let d=0;d<a.length;d+=1)a[d].c();f=I(),u(e,"class","mb-2")},m(d,b){S(d,e,b),g(e,t),g(t,r),g(t,n),g(e,i);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(e,null);g(e,f)},p(d,b){b&8&&s!==(s=d[3].strings[d[4]]+"")&&P(r,s),b&4&&(c=d[2](d[4]),a=Le(a,b,m,1,d,c,o,e,Je,ts,f,Zt))},d(d){d&&q(e);for(let b=0;b<a.length;b+=1)a[b].d()}}}function es(l){let e;return{c(){e=R(",")},m(t,s){S(t,e,s)},d(t){t&&q(e)}}}function ts(l,e){let t,s,r,n=e[7].fullname+"",i,a,o=e[9]>0&&es();return{key:l,first:null,c(){t=ve(),o&&o.c(),s=I(),r=p("a"),i=R(n),u(r,"href",a=e[7].profileurl),this.first=t},m(f,c){S(f,t,c),o&&o.m(f,c),S(f,s,c),S(f,r,c),g(r,i)},p(f,c){e=f,e[9]>0?o||(o=es(),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),c&4&&n!==(n=e[7].fullname+"")&&P(i,n),c&4&&a!==(a=e[7].profileurl)&&u(r,"href",a)},d(f){f&&q(t),o&&o.d(f),f&&q(s),f&&q(r)}}}function ss(l){let e=l[2](l[4]).length>0,t,s=e&&xt(l);return{c(){s&&s.c(),t=ve()},m(r,n){s&&s.m(r,n),S(r,t,n)},p(r,n){n&4&&(e=r[2](r[4]).length>0),e?s?s.p(r,n):(s=xt(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(r){s&&s.d(r),r&&q(t)}}}function Sn(l){let e,t,s,r,n,i,a,o,f,c=l[1].sender.fullname+"",m,d,b,v=["to","cc","bcc"],_=[];for(let h=0;h<3;h+=1)_[h]=ss(Jt(l,v,h));return{c(){e=p("div"),t=p("div"),s=p("img"),i=I(),a=p("div"),o=p("div"),f=p("a"),m=R(c),b=I();for(let h=0;h<3;h+=1)_[h].c();u(s,"aria-hidden","true"),u(s,"alt",r=l[1].sender.fullname),Qe(s.src,n=l[1].sender.pictureurl)||u(s,"src",n),u(s,"width","35"),u(s,"height","35"),u(s,"class","rounded-circle"),u(t,"class","mr-3"),u(f,"href",d=l[1].sender.profileurl),u(o,"class","mt-1 mb-2"),u(a,"class","d-flex flex-column"),u(e,"class","local-mail-message-users d-flex mb-n2")},m(h,w){S(h,e,w),g(e,t),g(t,s),g(e,i),g(e,a),g(a,o),g(o,f),g(f,m),g(a,b);for(let y=0;y<3;y+=1)_[y]&&_[y].m(a,null)},p(h,[w]){if(w&2&&r!==(r=h[1].sender.fullname)&&u(s,"alt",r),w&2&&!Qe(s.src,n=h[1].sender.pictureurl)&&u(s,"src",n),w&2&&c!==(c=h[1].sender.fullname+"")&&P(m,c),w&2&&d!==(d=h[1].sender.profileurl)&&u(f,"href",d),w&12){v=["to","cc","bcc"];let y;for(y=0;y<3;y+=1){const A=Jt(h,v,y);_[y]?_[y].p(A,w):(_[y]=ss(A),_[y].c(),_[y].m(a,null))}for(;y<3;y+=1)_[y].d(1)}},i:N,o:N,d(h){h&&q(e),tt(_,h)}}}function qn(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,f=>t(3,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;return l.$$set=f=>{"store"in f&&i(t(0,a=f.store)),"message"in f&&t(1,o=f.message)},l.$$.update=()=>{l.$$.dirty&2&&t(2,s=f=>o.recipients.filter(c=>c.type==f))},[a,o,s,r]}class zn extends ne{constructor(e){super(),re(this,e,qn,Sn,le,{store:0,message:1})}}function ls(l,e,t){const s=l.slice();return s[4]=e[t],s}function ns(l){let e,t,s,r;return s=new Os({props:{message:l[1]}}),{c(){e=p("hr"),t=I(),Q(s.$$.fragment)},m(n,i){S(n,e,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&2&&(a.message=n[1]),s.$set(a)},i(n){r||(z(s.$$.fragment,n),r=!0)},o(n){L(s.$$.fragment,n),r=!1},d(n){n&&q(e),n&&q(t),G(s,n)}}}function rs(l){let e,t=l[2].strings.references+"",s,r,n=[],i=new Map,a,o,f=l[1].references;const c=m=>m[4].id;for(let m=0;m<f.length;m+=1){let d=ls(l,f,m),b=c(d);i.set(b,n[m]=is(b,d))}return{c(){e=p("div"),s=R(t),r=I();for(let m=0;m<n.length;m+=1)n[m].c();a=ve(),u(e,"class","alert alert-secondary mt-4 mb-4 text-center")},m(m,d){S(m,e,d),g(e,s),S(m,r,d);for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(m,d);S(m,a,d),o=!0},p(m,d){(!o||d&4)&&t!==(t=m[2].strings.references+"")&&P(s,t),d&2&&(f=m[1].references,ce(),n=Le(n,d,c,1,m,f,i,a.parentNode,xe,is,a,ls),de())},i(m){if(!o){for(let d=0;d<f.length;d+=1)z(n[d]);o=!0}},o(m){for(let d=0;d<n.length;d+=1)L(n[d]);o=!1},d(m){m&&q(e),m&&q(r);for(let d=0;d<n.length;d+=1)n[d].d(m);m&&q(a)}}}function is(l,e){let t,s,r;return s=new In({props:{reference:e[4]}}),{key:l,first:null,c(){t=ve(),Q(s.$$.fragment),this.first=t},m(n,i){S(n,t,i),F(s,n,i),r=!0},p(n,i){e=n;const a={};i&2&&(a.reference=e[4]),s.$set(a)},i(n){r||(z(s.$$.fragment,n),r=!0)},o(n){L(s.$$.fragment,n),r=!1},d(n){n&&q(t),G(s,n)}}}function jn(l){let e,t,s,r=l[1].subject+"",n,i,a,o,f,c,m,d,b=l[1].fulltime+"",v,_,h,w,y,A,k,$,M,j,D=l[1].content+"",O,x,V,K,Y,H,ee,te,W;f=new $n({props:{store:l[0],message:l[1]}}),w=new gn({props:{store:l[0],message:l[1],canReplyAll:l[3]}}),A=new zn({props:{store:l[0],message:l[1]}});let U=l[1].attachments.length>0&&ns(l);H=new vn({props:{store:l[0],message:l[1],canReplyAll:l[3]}});let B=l[1].references.length>0&&rs(l);return{c(){e=p("div"),t=p("div"),s=p("h3"),n=R(r),i=I(),a=p("div"),o=p("div"),Q(f.$$.fragment),c=I(),m=p("div"),d=p("div"),v=R(b),_=I(),h=p("div"),Q(w.$$.fragment),y=I(),Q(A.$$.fragment),k=I(),$=p("hr"),M=I(),j=p("div"),O=I(),U&&U.c(),x=I(),V=p("hr"),K=I(),Y=p("div"),Q(H.$$.fragment),ee=I(),B&&B.c(),te=ve(),u(s,"class","h4 card-title mb-3 mb-md-2"),u(o,"class","d-flex flex-wrap mx-n2 mt-2"),he(o,"min-width","0"),u(d,"class","my-2 text-truncate"),u(h,"class","d-flex flex-shrink-0 ml-3 mr-n2"),u(m,"class","d-flex justify-content-between flex-shrink-0 ml-auto"),u(a,"class","d-md-flex align-items-start mb-2"),u(j,"class","local-mail-message-content svelte-18ecame"),u(Y,"class","mt-3 d-flex mr-n3 mb-n3 flex-column flex-sm-row justify-content-end"),u(t,"class","card-body p-3 px-xl-4"),u(e,"class","card")},m(T,Z){S(T,e,Z),g(e,t),g(t,s),g(s,n),g(t,i),g(t,a),g(a,o),F(f,o,null),g(a,c),g(a,m),g(m,d),g(d,v),g(m,_),g(m,h),F(w,h,null),g(t,y),F(A,t,null),g(t,k),g(t,$),g(t,M),g(t,j),j.innerHTML=D,g(t,O),U&&U.m(t,null),g(t,x),g(t,V),g(t,K),g(t,Y),F(H,Y,null),S(T,ee,Z),B&&B.m(T,Z),S(T,te,Z),W=!0},p(T,[Z]){(!W||Z&2)&&r!==(r=T[1].subject+"")&&P(n,r);const me={};Z&1&&(me.store=T[0]),Z&2&&(me.message=T[1]),f.$set(me),(!W||Z&2)&&b!==(b=T[1].fulltime+"")&&P(v,b);const be={};Z&1&&(be.store=T[0]),Z&2&&(be.message=T[1]),Z&8&&(be.canReplyAll=T[3]),w.$set(be);const ae={};Z&1&&(ae.store=T[0]),Z&2&&(ae.message=T[1]),A.$set(ae),(!W||Z&2)&&D!==(D=T[1].content+"")&&(j.innerHTML=D),T[1].attachments.length>0?U?(U.p(T,Z),Z&2&&z(U,1)):(U=ns(T),U.c(),z(U,1),U.m(t,x)):U&&(ce(),L(U,1,1,()=>{U=null}),de());const E={};Z&1&&(E.store=T[0]),Z&2&&(E.message=T[1]),Z&8&&(E.canReplyAll=T[3]),H.$set(E),T[1].references.length>0?B?(B.p(T,Z),Z&2&&z(B,1)):(B=rs(T),B.c(),z(B,1),B.m(te.parentNode,te)):B&&(ce(),L(B,1,1,()=>{B=null}),de())},i(T){W||(z(f.$$.fragment,T),z(w.$$.fragment,T),z(A.$$.fragment,T),z(U),z(H.$$.fragment,T),z(B),W=!0)},o(T){L(f.$$.fragment,T),L(w.$$.fragment,T),L(A.$$.fragment,T),L(U),L(H.$$.fragment,T),L(B),W=!1},d(T){T&&q(e),G(f),G(w),G(A),U&&U.d(),G(H),T&&q(ee),B&&B.d(T),T&&q(te)}}}function An(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,f=>t(2,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;return l.$$set=f=>{"store"in f&&i(t(0,a=f.store)),"message"in f&&t(1,o=f.message)},l.$$.update=()=>{l.$$.dirty&6&&t(3,s=o.sender.id==r.userid?o.recipients.filter(f=>f.type=="cc").length>0:o.recipients.filter(f=>["to","cc"].includes(f.type)&&f.id!=r.userid).length>0)},[a,o,r,s]}class Ln extends ne{constructor(e){super(),re(this,e,An,jn,le,{store:0,message:1})}}function as(l,e,t){const s=l.slice();return s[7]=e[t],s}function os(l){let e,t=l[7]+"",s,r;return{c(){e=p("option"),s=R(t),e.__value=r=l[7],e.value=e.__value},m(n,i){S(n,e,i),g(e,s)},p(n,i){i&8&&t!==(t=n[7]+"")&&P(s,t),i&8&&r!==(r=n[7])&&(e.__value=r,e.value=e.__value)},d(n){n&&q(e)}}}function Tn(l){let e,t,s,r=l[1].strings.messagesperpage+"",n,i,a,o,f,c,m=l[3],d=[];for(let b=0;b<m.length;b+=1)d[b]=os(as(l,m,b));return{c(){e=p("dov"),t=p("div"),s=p("label"),n=R(r),i=R(":"),a=I(),o=p("select");for(let b=0;b<d.length;b+=1)d[b].c();u(s,"for","local-mail-perpage-select"),u(o,"id","local-mail-perpage-select"),u(o,"class","custom-select"),l[2]===void 0&&Ke(()=>l[4].call(o)),u(t,"class","form-group"),u(e,"class","form-inline justify-content-end mt-3")},m(b,v){S(b,e,v),g(e,t),g(t,s),g(s,n),g(s,i),g(t,a),g(t,o);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(o,null);ot(o,l[2],!0),f||(c=[J(o,"change",l[4]),J(o,"change",l[5])],f=!0)},p(b,[v]){if(v&2&&r!==(r=b[1].strings.messagesperpage+"")&&P(n,r),v&8){m=b[3];let _;for(_=0;_<m.length;_+=1){const h=as(b,m,_);d[_]?d[_].p(h,v):(d[_]=os(h),d[_].c(),d[_].m(o,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=m.length}v&12&&ot(o,b[2])},i:N,o:N,d(b){b&&q(e),tt(d,b),f=!1,Ge(c)}}}function Dn(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,d=>t(1,r=d)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();const o=[5,10,20,50,100];let f=r.preferences.perpage;function c(){f=Zs(this),t(2,f),t(3,s),t(1,r)}const m=()=>a.setPerPage(f);return l.$$set=d=>{"store"in d&&i(t(0,a=d.store))},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=o.includes(r.preferences.perpage)?o:o.concat([r.preferences.perpage]).sort((d,b)=>d-b))},[a,r,f,s,c,m]}class Nn extends ne{constructor(e){super(),re(this,e,Dn,Tn,le,{store:0})}}function Bn(l){let e,t,s,r,n,i,a,o,f,c,m,d,b,v,_=l[8].strings.from+"",h,w,y,A,k,$,M=l[8].strings.to+"",j,D,O,x,V,K,Y=l[8].strings.filterbydate+"",H,ee,te,W,U,B,T,Z,me,be=l[8].strings.searchbyunread+"",ae,E,se,ke,pe,$e,_e,ye=l[8].strings.searchbyattach+"",Te,De,Ie,Me,je,He,we,Ne,X,ie,Se,rt;return{c(){e=p("form"),t=p("div"),t.innerHTML='<i class="fa fa-fw fa-search" aria-hidden="true"></i>',s=I(),r=p("input"),a=I(),o=p("button"),f=p("i"),m=I(),d=p("div"),b=p("div"),v=p("label"),h=R(_),w=I(),y=p("input"),A=I(),k=p("div"),$=p("label"),j=R(M),D=I(),O=p("input"),x=I(),V=p("div"),K=p("label"),H=R(Y),ee=I(),te=p("input"),W=I(),U=p("div"),B=p("div"),T=p("input"),Z=I(),me=p("label"),ae=R(be),E=I(),se=p("div"),ke=p("div"),pe=p("input"),$e=I(),_e=p("label"),Te=R(ye),De=I(),Ie=p("div"),Me=p("input"),He=I(),we=p("input"),u(t,"class","position-absolute h-100 d-flex align-items-center px-2"),he(t,"top","0"),he(t,"left","0"),C(t,"text-primary",l[12]),u(r,"type","text"),u(r,"class","form-control px-5"),u(r,"placeholder",n=l[8].strings.search),u(r,"aria-label",i=l[8].strings.search),u(f,"class","fa fa-fw fa-sliders"),u(f,"aria-hidden","true"),u(o,"data-toggle","dropdown"),u(o,"data-reference","parent"),u(o,"aria-expanded","false"),u(o,"class","btn position-absolute h-100 d-flex align-items-center px-2"),he(o,"top","0"),he(o,"right","0"),u(o,"title",c=l[8].strings.advsearch),C(o,"text-primary",l[7]),u(v,"for","local-mail-search-input-semder"),u(y,"type","text"),u(y,"class","form-control"),u(y,"id","local-mail-search-input-sender"),u(b,"class","form-group"),u($,"for","local-mail-search-input-recipients"),u(O,"type","text"),u(O,"class","form-control"),u(O,"id","local-mail-search-input-recipients"),u(k,"class","form-group"),u(K,"for","local-mail-search-input-date"),u(te,"type","date"),u(te,"class","form-control"),u(te,"id","local-mail-search-input-date"),u(V,"class","form-group"),u(T,"class","form-check-input"),u(T,"type","checkbox"),u(T,"id","local-mail-search-input-unread"),u(me,"class","form-check-label"),u(me,"for","local-mail-search-input-unread"),u(B,"class","form-check"),u(U,"class","form-group"),u(pe,"class","form-check-input"),u(pe,"type","checkbox"),u(pe,"id","local-mail-search-input-attachments"),u(_e,"class","form-check-label"),u(_e,"for","local-mail-search-input-attachments"),u(ke,"class","form-check"),u(se,"class","form-group"),u(Me,"type","button"),u(Me,"class","btn btn-secondary"),Me.value=je=l[8].strings.cancel,u(we,"type","submit"),we.disabled=Ne=!l[11],u(we,"class","btn btn-primary"),we.value=X=l[8].strings.search,u(Ie,"class","d-flex justify-content-between"),u(d,"class","dropdown-menu dropdown-menu-right p-3"),u(e,"class","local-mail-search-input position-relative svelte-pj365c")},m(ue,ge){S(ue,e,ge),g(e,t),g(e,s),g(e,r),ze(r,l[6]),g(e,a),g(e,o),g(o,f),l[17](o),g(e,m),g(e,d),g(d,b),g(b,v),g(v,h),g(b,w),g(b,y),ze(y,l[5]),l[19](y),g(d,A),g(d,k),g(k,$),g($,j),g(k,D),g(k,O),ze(O,l[4]),g(d,x),g(d,V),g(V,K),g(K,H),g(V,ee),g(V,te),ze(te,l[1]),g(d,W),g(d,U),g(U,B),g(B,T),T.checked=l[3],g(B,Z),g(B,me),g(me,ae),g(d,E),g(d,se),g(se,ke),g(ke,pe),pe.checked=l[2],g(ke,$e),g(ke,_e),g(_e,Te),g(d,De),g(d,Ie),g(Ie,Me),g(Ie,He),g(Ie,we),Se||(rt=[J(r,"input",l[16]),J(r,"keypress",l[15]),J(y,"input",l[18]),J(O,"input",l[20]),J(te,"input",l[21]),J(T,"change",l[22]),J(pe,"change",l[23]),J(Me,"click",l[24]),J(we,"click",l[25]),J(e,"submit",Re(l[26])),Fe(ie=st.call(null,e,{"shown.bs.dropdown":l[27]}))],Se=!0)},p(ue,[ge]){ge&4096&&C(t,"text-primary",ue[12]),ge&256&&n!==(n=ue[8].strings.search)&&u(r,"placeholder",n),ge&256&&i!==(i=ue[8].strings.search)&&u(r,"aria-label",i),ge&64&&r.value!==ue[6]&&ze(r,ue[6]),ge&256&&c!==(c=ue[8].strings.advsearch)&&u(o,"title",c),ge&128&&C(o,"text-primary",ue[7]),ge&256&&_!==(_=ue[8].strings.from+"")&&P(h,_),ge&32&&y.value!==ue[5]&&ze(y,ue[5]),ge&256&&M!==(M=ue[8].strings.to+"")&&P(j,M),ge&16&&O.value!==ue[4]&&ze(O,ue[4]),ge&256&&Y!==(Y=ue[8].strings.filterbydate+"")&&P(H,Y),ge&2&&ze(te,ue[1]),ge&8&&(T.checked=ue[3]),ge&256&&be!==(be=ue[8].strings.searchbyunread+"")&&P(ae,be),ge&4&&(pe.checked=ue[2]),ge&256&&ye!==(ye=ue[8].strings.searchbyattach+"")&&P(Te,ye),ge&256&&je!==(je=ue[8].strings.cancel)&&(Me.value=je),ge&2048&&Ne!==(Ne=!ue[11])&&(we.disabled=Ne),ge&256&&X!==(X=ue[8].strings.search)&&(we.value=X),ie&&Ae(ie.update)&&ge&1024&&ie.update.call(null,{"shown.bs.dropdown":ue[27]})},i:N,o:N,d(ue){ue&&q(e),l[17](null),l[19](null),Se=!1,Ge(rt)}}}function Cn(l,e,t){let s,r,n,i,a,o,f,c,m,d,b=N,v=()=>(b(),b=oe(_,B=>t(8,d=B)),_);l.$$.on_destroy.push(()=>b());let{store:_}=e;v();let h,w;const y=B=>{if(B==0)return"";const T=new Date(B*1e3);return[String(T.getFullYear()),String(T.getMonth()+1).padStart(2,"0"),String(T.getDate()).padStart(2,"0")].join("-")},A=B=>B?Math.floor(new Date(parseInt(B.slice(0,4)),parseInt(B.slice(5,7))-1,parseInt(B.slice(8,10))).getTime()/1e3):0,k=()=>{_.navigate({...d.params,query:{...d.params.query,content:void 0,sender:void 0,recipients:void 0,unread:void 0,attachments:void 0,time:void 0}}),window.jQuery(h).dropdown("hide")},$=()=>{_.search({startid:void 0,content:s,sender:r,recipients:n,unread:i,attachments:a,time:A(o)}),window.jQuery(h).dropdown("hide")},M=B=>{B.key=="Enter"&&(B.preventDefault(),$())};function j(){s=this.value,t(6,s),t(8,d)}function D(B){Oe[B?"unshift":"push"](()=>{h=B,t(9,h)})}function O(){r=this.value,t(5,r),t(8,d)}function x(B){Oe[B?"unshift":"push"](()=>{w=B,t(10,w)})}function V(){n=this.value,t(4,n),t(8,d)}function K(){o=this.value,t(1,o),t(8,d)}function Y(){i=this.checked,t(3,i),t(8,d)}function H(){a=this.checked,t(2,a),t(8,d)}const ee=()=>k(),te=()=>$(),W=()=>$,U=()=>{w.focus()};return l.$$set=B=>{"store"in B&&v(t(0,_=B.store))},l.$$.update=()=>{var B,T,Z,me,be,ae,E,se,ke,pe,$e,_e;l.$$.dirty&256&&t(6,s=((B=d.params.query)==null?void 0:B.content)||""),l.$$.dirty&256&&t(5,r=((T=d.params.query)==null?void 0:T.sender)||""),l.$$.dirty&256&&t(4,n=((Z=d.params.query)==null?void 0:Z.recipients)||""),l.$$.dirty&256&&t(3,i=((me=d.params.query)==null?void 0:me.unread)||!1),l.$$.dirty&256&&t(2,a=((be=d.params.query)==null?void 0:be.attachments)||!1),l.$$.dirty&256&&t(1,o=y(((ae=d.params.query)==null?void 0:ae.time)||0)),l.$$.dirty&256&&t(7,f=!!((E=d.params.query)!=null&&E.sender||(se=d.params.query)!=null&&se.recipients||(ke=d.params.query)!=null&&ke.unread||(pe=d.params.query)!=null&&pe.attachments||($e=d.params.query)!=null&&$e.time)),l.$$.dirty&384&&t(12,c=!!((_e=d.params.query)!=null&&_e.content||f)),l.$$.dirty&126&&t(11,m=!!(s||r||n||i||a||o))},[_,o,a,i,n,r,s,f,d,h,w,m,c,k,$,M,j,D,O,x,V,K,Y,H,ee,te,W,U]}class Rn extends ne{constructor(e){super(),re(this,e,Cn,Bn,le,{store:0})}}function fs(l,e,t){const s=l.slice();return s[4]=e[t],s}function us(l){let e,t=l[1].strings.undo+"",s,r,n;function i(){return l[2](l[4])}return{c(){e=p("button"),s=R(t),u(e,"class","local-mail-toast-undo btn font-weight-bold px-2 py-0 ml-3 svelte-kxpqnp")},m(a,o){S(a,e,o),g(e,s),r||(n=J(e,"click",i),r=!0)},p(a,o){l=a,o&2&&t!==(t=l[1].strings.undo+"")&&P(s,t)},d(a){a&&q(e),r=!1,n()}}}function cs(l,e){let t,s,r,n=e[4].text+"",i,a,o,f,c,m,d,b,v,_,h=N,w,y,A,k=e[4].undo&&us(e);function $(){return e[3](e[4])}return{key:l,first:null,c(){t=p("div"),s=p("div"),r=p("div"),i=R(n),a=I(),k&&k.c(),o=I(),f=p("button"),c=p("i"),d=I(),u(r,"class","px-1 mr-auto"),u(c,"class","fa fa-times"),u(f,"class","btn px-2 py-0 ml-2 text-white-50"),u(f,"title",m=e[1].strings.close),u(s,"class","toast-body d-flex align-items-center p-2"),u(t,"class","toast mt-2 mb-0"),u(t,"role","alert"),u(t,"aria-live","assertive"),u(t,"aria-atomic","true"),u(t,"data-autohide","false"),this.first=t},m(M,j){S(M,t,j),g(t,s),g(s,r),g(r,i),g(s,a),k&&k.m(s,null),g(s,o),g(s,f),g(f,c),g(t,d),w=!0,y||(A=J(f,"click",$),y=!0)},p(M,j){e=M,(!w||j&2)&&n!==(n=e[4].text+"")&&P(i,n),e[4].undo?k?k.p(e,j):(k=us(e),k.c(),k.m(s,o)):k&&(k.d(1),k=null),(!w||j&2&&m!==(m=e[1].strings.close))&&u(f,"title",m)},r(){_=t.getBoundingClientRect()},f(){ys(t),h(),Ms(t,_)},a(){h(),h=Is(t,_,Cs,{})},i(M){w||(Ke(()=>{w&&(v&&v.end(1),b=et(t,zt,{y:50,delay:200}),b.start())}),w=!0)},o(M){b&&b.invalidate(),v=Ss(t,zt,{y:50,duration:400}),w=!1},d(M){M&&q(t),k&&k.d(),M&&v&&v.end(),y=!1,A()}}}function Pn(l){let e,t=[],s=new Map,r,n=l[1].toasts;const i=a=>a[4];for(let a=0;a<n.length;a+=1){let o=fs(l,n,a),f=i(o);s.set(f,t[a]=cs(f,o))}return{c(){e=p("div");for(let a=0;a<t.length;a+=1)t[a].c();u(e,"aria-live","polite"),u(e,"aria-atomic","true"),u(e,"class","local-mail-toasts position-fixed d-flex flex-column-reverse p-3 svelte-kxpqnp")},m(a,o){S(a,e,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(a,[o]){if(o&3){n=a[1].toasts,ce();for(let f=0;f<t.length;f+=1)t[f].r();t=Le(t,o,i,1,a,n,s,e,$s,cs,null,fs);for(let f=0;f<t.length;f+=1)t[f].a();de()}},i(a){if(!r){for(let o=0;o<n.length;o+=1)z(t[o]);r=!0}},o(a){for(let o=0;o<t.length;o+=1)L(t[o]);r=!1},d(a){a&&q(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function En(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,f=>t(1,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=f=>i.undo(f),o=f=>i.hideToast(f);return l.$$set=f=>{"store"in f&&n(t(0,i=f.store))},[i,s,a,o]}class Un extends ne{constructor(e){super(),re(this,e,En,Pn,le,{store:0})}}function Qn(l){let e,t,s,r,n;return{c(){e=p("button"),t=p("i"),u(t,"class","fa fa fa-fw fa-arrow-left"),u(e,"type","button"),u(e,"class","local-mail-back-button btn btn-secondary svelte-1wqh8fr"),u(e,"title",s=l[1].strings.back)},m(i,a){S(i,e,a),g(e,t),r||(n=J(e,"click",l[2]),r=!0)},p(i,[a]){a&2&&s!==(s=i[1].strings.back)&&u(e,"title",s)},i:N,o:N,d(i){i&&q(e),r=!1,n()}}}function Fn(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,o=>t(1,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=()=>i.navigate({...s.params,messageid:void 0});return l.$$set=o=>{"store"in o&&n(t(0,i=o.store))},[i,s,a]}class Gn extends ne{constructor(e){super(),re(this,e,Fn,Qn,le,{store:0})}}function Hn(l){let e,t,s,r,n,i,a,o,f=l[1].strings.all+"",c,m,d,b=l[1].strings.none+"",v,_,h,w=l[1].strings.read+"",y,A,k,$=l[1].strings.unread+"",M,j,D,O=l[1].strings.starred+"",x,V,K,Y=l[1].strings.unstarred+"",H,ee,te;return{c(){e=p("div"),t=p("button"),s=p("i"),i=I(),a=p("div"),o=p("button"),c=R(f),m=I(),d=p("button"),v=R(b),_=I(),h=p("button"),y=R(w),A=I(),k=p("button"),M=R($),j=I(),D=p("button"),x=R(O),V=I(),K=p("button"),H=R(Y),u(s,"class",r="fa fa-fw "+l[2]),u(t,"class","btn btn-secondary dropdown-toggle"),u(t,"data-toggle","dropdown"),u(t,"aria-expanded","false"),u(t,"title",n=l[1].strings.select),u(o,"class","dropdown-item"),u(d,"class","dropdown-item"),u(h,"class","dropdown-item"),u(k,"class","dropdown-item"),u(D,"class","dropdown-item"),u(K,"class","dropdown-item"),u(a,"class","dropdown-menu"),u(e,"class","btn-group mr-3"),u(e,"role","group")},m(W,U){S(W,e,U),g(e,t),g(t,s),g(e,i),g(e,a),g(a,o),g(o,c),g(a,m),g(a,d),g(d,v),g(a,_),g(a,h),g(h,y),g(a,A),g(a,k),g(k,M),g(a,j),g(a,D),g(D,x),g(a,V),g(a,K),g(K,H),ee||(te=[J(o,"click",l[3]),J(d,"click",l[4]),J(h,"click",l[5]),J(k,"click",l[6]),J(D,"click",l[7]),J(K,"click",l[8])],ee=!0)},p(W,[U]){U&4&&r!==(r="fa fa-fw "+W[2])&&u(s,"class",r),U&2&&n!==(n=W[1].strings.select)&&u(t,"title",n),U&2&&f!==(f=W[1].strings.all+"")&&P(c,f),U&2&&b!==(b=W[1].strings.none+"")&&P(v,b),U&2&&w!==(w=W[1].strings.read+"")&&P(y,w),U&2&&$!==($=W[1].strings.unread+"")&&P(M,$),U&2&&O!==(O=W[1].strings.starred+"")&&P(x,O),U&2&&Y!==(Y=W[1].strings.unstarred+"")&&P(H,Y)},i:N,o:N,d(W){W&&q(e),ee=!1,Ge(te)}}}function On(l,e,t){let s,r,n=N,i=()=>(n(),n=oe(a,v=>t(1,r=v)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();const o=()=>a.selectAll("all"),f=()=>a.selectAll("none"),c=()=>a.selectAll("read"),m=()=>a.selectAll("unread"),d=()=>a.selectAll("starred"),b=()=>a.selectAll("unstarred");return l.$$set=v=>{"store"in v&&i(t(0,a=v.store))},l.$$.update=()=>{l.$$.dirty&2&&t(2,s=r.selectedMessageIds.size==r.list.messages.length?"fa-check-square-o":r.selectedMessageIds.size>0?"fa-minus-square-o":"fa-square-o")},[a,r,s,o,f,c,m,d,b]}class Vn extends ne{constructor(e){super(),re(this,e,On,Hn,le,{store:0})}}function Kn(l){let e,t;return e=new Vn({props:{store:l[0]}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Wn(l){let e,t;return e=new Gn({props:{store:l[0]}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function ds(l){let e,t,s,r,n,i,a,o;const f=[Yn,Xn],c=[];function m(d,b){return d[1].params.type=="trash"?0:1}return t=m(l),s=c[t]=f[t](l),n=new Ts({props:{store:l[0]}}),a=new Ds({props:{store:l[0]}}),{c(){e=p("div"),s.c(),r=I(),Q(n.$$.fragment),i=I(),Q(a.$$.fragment),u(e,"class","btn-group mr-auto"),u(e,"role","group")},m(d,b){S(d,e,b),c[t].m(e,null),g(e,r),F(n,e,null),S(d,i,b),F(a,d,b),o=!0},p(d,b){let v=t;t=m(d),t===v?c[t].p(d,b):(ce(),L(c[v],1,1,()=>{c[v]=null}),de(),s=c[t],s?s.p(d,b):(s=c[t]=f[t](d),s.c()),z(s,1),s.m(e,r));const _={};b&1&&(_.store=d[0]),n.$set(_);const h={};b&1&&(h.store=d[0]),a.$set(h)},i(d){o||(z(s),z(n.$$.fragment,d),z(a.$$.fragment,d),o=!0)},o(d){L(s),L(n.$$.fragment,d),L(a.$$.fragment,d),o=!1},d(d){d&&q(e),c[t].d(),G(n),d&&q(i),G(a,d)}}}function Xn(l){let e,t,s,r;return e=new Ls({props:{store:l[0]}}),s=new zs({props:{store:l[0]}}),{c(){Q(e.$$.fragment),t=I(),Q(s.$$.fragment)},m(n,i){F(e,n,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(z(e.$$.fragment,n),z(s.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),r=!1},d(n){G(e,n),n&&q(t),G(s,n)}}}function Yn(l){let e,t,s,r;return e=new Ns({props:{store:l[0]}}),s=new js({props:{store:l[0]}}),{c(){Q(e.$$.fragment),t=I(),Q(s.$$.fragment)},m(n,i){F(e,n,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(z(e.$$.fragment,n),z(s.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),r=!1},d(n){G(e,n),n&&q(t),G(s,n)}}}function Jn(l){let e,t,s,r,n;const i=[Wn,Kn],a=[];function o(c,m){return c[1].message?0:1}t=o(l),s=a[t]=i[t](l);let f=l[1].viewSize>=fe.MD&&ds(l);return{c(){e=p("div"),s.c(),r=I(),f&&f.c(),u(e,"role","toolbar"),u(e,"class","local-mail-toolbar d-flex w-100")},m(c,m){S(c,e,m),a[t].m(e,null),g(e,r),f&&f.m(e,null),n=!0},p(c,[m]){let d=t;t=o(c),t===d?a[t].p(c,m):(ce(),L(a[d],1,1,()=>{a[d]=null}),de(),s=a[t],s?s.p(c,m):(s=a[t]=i[t](c),s.c()),z(s,1),s.m(e,r)),c[1].viewSize>=fe.MD?f?(f.p(c,m),m&2&&z(f,1)):(f=ds(c),f.c(),z(f,1),f.m(e,null)):f&&(ce(),L(f,1,1,()=>{f=null}),de())},i(c){n||(z(s),z(f),n=!0)},o(c){L(s),L(f),n=!1},d(c){c&&q(e),a[t].d(),f&&f.d()}}}function Zn(l,e,t){let s,r=N,n=()=>(r(),r=oe(i,a=>t(1,s=a)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;return n(),l.$$set=a=>{"store"in a&&n(t(0,i=a.store))},[i,s]}class xn extends ne{constructor(e){super(),re(this,e,Zn,Jn,le,{store:0})}}const{window:ms}=ks;function gs(l){let e,t,s;return{c(){e=p("i"),t=I(),s=R(l[1]),u(e,"class","fa fa-angle-right mx-1"),u(e,"aria-hidden","true")},m(r,n){S(r,e,n),S(r,t,n),S(r,s,n)},p(r,n){n&2&&P(s,r[1])},d(r){r&&q(e),r&&q(t),r&&q(s)}}}function _s(l){let e,t,s;return t=new qs({props:{strings:l[2].strings,courseid:l[2].params.courseid}}),{c(){e=p("div"),Q(t.$$.fragment),u(e,"class","flex-shrink-1 text-truncate d-flex")},m(r,n){S(r,e,n),F(t,e,null),s=!0},p(r,n){const i={};n&4&&(i.strings=r[2].strings),n&4&&(i.courseid=r[2].params.courseid),t.$set(i)},i(r){s||(z(t.$$.fragment,r),s=!0)},o(r){L(t.$$.fragment,r),s=!1},d(r){r&&q(e),G(t)}}}function bs(l){let e,t,s;return t=new qs({props:{strings:l[2].strings,courseid:l[2].params.courseid}}),{c(){e=p("div"),Q(t.$$.fragment),u(e,"class","local-mail-view-side-column svelte-y5hqcs")},m(r,n){S(r,e,n),F(t,e,null),s=!0},p(r,n){const i={};n&4&&(i.strings=r[2].strings),n&4&&(i.courseid=r[2].params.courseid),t.$set(i)},i(r){s||(z(t.$$.fragment,r),s=!0)},o(r){L(t.$$.fragment,r),s=!1},d(r){r&&q(e),G(t)}}}function ps(l){let e,t,s;return t=new el({props:{settings:l[2].settings,strings:l[2].strings,menu:l[2].menu,params:l[2].params,onClick:l[7]}}),{c(){e=p("div"),Q(t.$$.fragment),u(e,"class","local-mail-view-side-column svelte-y5hqcs")},m(r,n){S(r,e,n),F(t,e,null),s=!0},p(r,n){const i={};n&4&&(i.settings=r[2].settings),n&4&&(i.strings=r[2].strings),n&4&&(i.menu=r[2].menu),n&4&&(i.params=r[2].params),n&1&&(i.onClick=r[7]),t.$set(i)},i(r){s||(z(t.$$.fragment,r),s=!0)},o(r){L(t.$$.fragment,r),s=!1},d(r){r&&q(e),G(t)}}}function er(l){let e,t,s,r;return e=new cn({props:{store:l[0]}}),s=new Nn({props:{store:l[0]}}),{c(){Q(e.$$.fragment),t=I(),Q(s.$$.fragment)},m(n,i){F(e,n,i),S(n,t,i),F(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(z(e.$$.fragment,n),z(s.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),L(s.$$.fragment,n),r=!1},d(n){G(e,n),n&&q(t),G(s,n)}}}function tr(l){let e,t;return e=new Ln({props:{store:l[0],message:l[2].message}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),r&4&&(n.message=s[2].message),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function hs(l){let e,t;return e=new Pl({props:{store:l[0]}}),{c(){Q(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function sr(l){let e,t,s,r,n,i=l[2].strings.pluginname+"",a,o,f,c,m,d,b,v,_,h,w,y,A,k,$,M,j,D,O,x,V,K,Y,H,ee,te;document.title=e=l[4]+" - "+l[2].strings.pluginname;let W=l[2].viewSize<fe.LG&&gs(l);d=new Rn({props:{store:l[0]}});let U=l[2].viewSize<fe.LG&&_s(l),B=l[2].viewSize>=fe.LG&&bs(l);y=new xn({props:{store:l[0]}});let T=l[2].viewSize>=fe.LG&&ps(l);const Z=[tr,er],me=[];function be(E,se){return E[2].message?0:1}j=be(l),D=me[j]=Z[j](l);let ae=l[2].viewSize<fe.MD&&hs(l);return V=new Un({props:{store:l[0]}}),Y=new ol({props:{store:l[0]}}),{c(){t=I(),s=p("div"),r=p("div"),n=p("h1"),a=R(i),o=I(),W&&W.c(),f=I(),c=p("div"),m=p("div"),Q(d.$$.fragment),b=I(),U&&U.c(),v=I(),_=p("div"),B&&B.c(),h=I(),w=p("div"),Q(y.$$.fragment),A=I(),k=p("div"),T&&T.c(),$=I(),M=p("div"),D.c(),O=I(),ae&&ae.c(),x=I(),Q(V.$$.fragment),K=I(),Q(Y.$$.fragment),u(n,"class","h2 local-mail-view-side-column text-truncate mb-4 svelte-y5hqcs"),u(m,"class","local-mail-view-search flex-shrink-1 svelte-y5hqcs"),u(c,"class","local-mail-view-main-column d-flex mb-4 svelte-y5hqcs"),u(r,"class","row align-items-center"),u(w,"class","local-mail-view-main-column d-flex svelte-y5hqcs"),u(_,"class","row mb-3"),u(M,"class","local-mail-view-main-column svelte-y5hqcs"),u(k,"class","row mb-3"),u(s,"class","local-mail-view container-fluid py-4 svelte-y5hqcs"),C(s,"local-mail-loading",l[2].loading)},m(E,se){S(E,t,se),S(E,s,se),g(s,r),g(r,n),g(n,a),g(n,o),W&&W.m(n,null),g(r,f),g(r,c),g(c,m),F(d,m,null),g(c,b),U&&U.m(c,null),g(s,v),g(s,_),B&&B.m(_,null),g(_,h),g(_,w),F(y,w,null),g(s,A),g(s,k),T&&T.m(k,null),g(k,$),g(k,M),me[j].m(M,null),g(s,O),ae&&ae.m(s,null),g(s,x),F(V,s,null),g(s,K),F(Y,s,null),l[8](s),H=!0,ee||(te=[J(ms,"resize",l[5]),J(ms,"popstate",l[6])],ee=!0)},p(E,[se]){(!H||se&20)&&e!==(e=E[4]+" - "+E[2].strings.pluginname)&&(document.title=e),(!H||se&4)&&i!==(i=E[2].strings.pluginname+"")&&P(a,i),E[2].viewSize<fe.LG?W?W.p(E,se):(W=gs(E),W.c(),W.m(n,null)):W&&(W.d(1),W=null);const ke={};se&1&&(ke.store=E[0]),d.$set(ke),E[2].viewSize<fe.LG?U?(U.p(E,se),se&4&&z(U,1)):(U=_s(E),U.c(),z(U,1),U.m(c,null)):U&&(ce(),L(U,1,1,()=>{U=null}),de()),E[2].viewSize>=fe.LG?B?(B.p(E,se),se&4&&z(B,1)):(B=bs(E),B.c(),z(B,1),B.m(_,h)):B&&(ce(),L(B,1,1,()=>{B=null}),de());const pe={};se&1&&(pe.store=E[0]),y.$set(pe),E[2].viewSize>=fe.LG?T?(T.p(E,se),se&4&&z(T,1)):(T=ps(E),T.c(),z(T,1),T.m(k,$)):T&&(ce(),L(T,1,1,()=>{T=null}),de());let $e=j;j=be(E),j===$e?me[j].p(E,se):(ce(),L(me[$e],1,1,()=>{me[$e]=null}),de(),D=me[j],D?D.p(E,se):(D=me[j]=Z[j](E),D.c()),z(D,1),D.m(M,null)),E[2].viewSize<fe.MD?ae?(ae.p(E,se),se&4&&z(ae,1)):(ae=hs(E),ae.c(),z(ae,1),ae.m(s,x)):ae&&(ce(),L(ae,1,1,()=>{ae=null}),de());const _e={};se&1&&(_e.store=E[0]),V.$set(_e);const ye={};se&1&&(ye.store=E[0]),Y.$set(ye),(!H||se&4)&&C(s,"local-mail-loading",E[2].loading)},i(E){H||(z(d.$$.fragment,E),z(U),z(B),z(y.$$.fragment,E),z(T),z(D),z(ae),z(V.$$.fragment,E),z(Y.$$.fragment,E),H=!0)},o(E){L(d.$$.fragment,E),L(U),L(B),L(y.$$.fragment,E),L(T),L(D),L(ae),L(V.$$.fragment,E),L(Y.$$.fragment,E),H=!1},d(E){E&&q(t),E&&q(s),W&&W.d(),G(d),U&&U.d(),B&&B.d(),G(y),T&&T.d(),me[j].d(),ae&&ae.d(),G(V),G(Y),l[8](null),ee=!1,Ge(te)}}}function lr(l,e,t){let s,r,n,i=N,a=()=>(i(),i=oe(o,_=>t(2,n=_)),o);l.$$.on_destroy.push(()=>i());let{store:o}=e;a();let f,c=0;ws(()=>{o.setViewportSize(window.innerWidth)}),xs(()=>{c!=n.navigationId&&(c=n.navigationId,f.scrollIntoView())});const m=()=>o.setViewportSize(window.innerWidth),d=()=>o.navigate(vs()),b=_=>o.navigate(_);function v(_){Oe[_?"unshift":"push"](()=>{f=_,t(3,f)})}return l.$$set=_=>{"store"in _&&a(t(0,o=_.store))},l.$$.update=()=>{var _,h;l.$$.dirty&4&&t(1,s=n.params.type=="inbox"?n.strings.inbox:n.params.type=="starred"?n.strings.starredmail:n.params.type=="sent"?n.strings.sentmail:n.params.type=="drafts"?n.strings.drafts:n.params.type=="trash"?n.strings.trash:n.params.type=="label"?((_=n.menu.labels.find(w=>w.id==n.params.labelid))==null?void 0:_.name)||"":n.params.type=="course"&&((h=n.menu.courses.find(w=>w.id==n.params.courseid))==null?void 0:h.fullname)||""),l.$$.dirty&6&&t(4,r=n.message?n.message.subject:s)},[o,s,n,f,r,m,d,b,v]}class nr extends ne{constructor(e){super(),re(this,e,lr,sr,le,{store:0})}}async function rr(){const l=document.getElementById("local-mail-view"),e=document.getElementById("local-mail-navbar"),t=window.local_mail_view_data||{},s=await rl(t);if(l&&new nr({target:l,props:{store:s}}),e){e.innerHTML="";const r=new tl({target:e,props:{settings:s.get().settings,strings:s.get().strings,menu:s.get().menu,onClick:n=>s.navigate(n)}});s.subscribe(n=>{r.$set({settings:n.settings,strings:n.strings,menu:n.menu})})}}rr();
